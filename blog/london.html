# Holidays with IA

To start 2020 nicely, my friends and I decided to have a trip to London.  
We got 5 days and each of us have a list of things to do.
I though that using everyday machine learning tools to tidy it up might be a good and quick way to satisfy everyones.

## The data

First of all, each of us had to make a list of thinks to do in London, including the name and the adress of each place.
We need the longitude and latitude of each item, thanks to website like GPS, it was easy to get.  

## The map

Using python on a daily basis, my choice quickly turn out to the Folium library, which is easy and neat tool to display maps.  
Furthermore you can play with the kind of activity, changing logo etc.

## Clustering

To split the trip in 5 days, it might be a good idea to group place in 5 segments to focus on a restricted area each day.
A classic algorithm to do so is the kmeans that you can find in scikit learn.  
The result is really satisfaing and reduce the deplacement on the city.  


```python
import pandas as pd
import folium
from sklearn.cluster import KMeans
```


```python
df = pd.read_csv('london.csv', sep=',')
df.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>kind</th>
      <th>experience</th>
      <th>name</th>
      <th>lat</th>
      <th>lon</th>
      <th>adress</th>
      <th>city</th>
      <th>area_name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>see</td>
      <td>theater</td>
      <td>the mousetrap</td>
      <td>51.512833</td>
      <td>-0.127695</td>
      <td>St. Martinâ€™s Theatre  West St</td>
      <td>London WC2H 9NZ</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>visit</td>
      <td>market</td>
      <td>Covent Garden Market</td>
      <td>51.511999</td>
      <td>-0.122765</td>
      <td>The Market Bldg</td>
      <td>Brentford WC2E 8RF</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>visit</td>
      <td>cathedral</td>
      <td>Abbaye de Westminster</td>
      <td>51.499292</td>
      <td>-0.127310</td>
      <td>20 Deans Yd Westminster</td>
      <td>London SW1P 3PA</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>see</td>
      <td>view</td>
      <td>Sky Garden</td>
      <td>51.511200</td>
      <td>-0.083541</td>
      <td>20 Fenchurch St</td>
      <td>London EC3M 8AF</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>visit</td>
      <td>market</td>
      <td>Camden Market</td>
      <td>51.551704</td>
      <td>-0.158826</td>
      <td>NW1</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>




```python
coloration_kind = {'see': 'orange',
              'visit': 'beige',
              'shop': 'lightgreen',
              'eat': 'limegreen',
              'drink': 'darkgreen'}

coloration_cluster = {0: 'orange',
                      1: 'beige',
                      2: 'lightgreen',
                      3: 'limegreen'}


icon_dict = {'see': 'picture',
             'visit': 'camera',
             'shop': 'shopping-cart',
             'eat': 'cutlery',
             'drink': 'glass'}
```

[icon used](https://getbootstrap.com/docs/3.3/components/#glyphicons-glyphs)


```python
df[['lat', 'lon']].mean()
```




    lat    51.511117
    lon    -0.109260
    dtype: float64




```python
locations = df[['lat', 'lon']]
locationlist = locations.values.tolist()
```


```python
map = folium.Map(location=[51.51, -0.10], 
                 zoom_start=12,
                 tiles='Stamen Toner')
```


```python
for point in range(0, len(locationlist)):
    folium.Marker(locationlist[point],
                  icon= folium.Icon(color=coloration_cluster[df.iloc[point]['cluster']], 
                                    icon_color=coloration_kind[df.iloc[point]['kind']],
                                    icon = icon_dict[df.iloc[point]['kind']]),
                  popup=df['name'][point]).add_to(map)
```

    /home/tom/source/toucan/env/lib/python3.6/site-packages/ipykernel_launcher.py:5: UserWarning: color argument of Icon should be one of: {'darkpurple', 'darkgreen', 'lightblue', 'black', 'darkblue', 'purple', 'white', 'lightred', 'beige', 'cadetblue', 'green', 'darkred', 'lightgreen', 'blue', 'pink', 'orange', 'gray', 'lightgray', 'red'}.
      """



```python
map
```




<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><iframe src="data:text/html;charset=utf-8;base64,PCFET0NUWVBFIGh0bWw+CjxoZWFkPiAgICAKICAgIDxtZXRhIGh0dHAtZXF1aXY9ImNvbnRlbnQtdHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04IiAvPgogICAgCiAgICAgICAgPHNjcmlwdD4KICAgICAgICAgICAgTF9OT19UT1VDSCA9IGZhbHNlOwogICAgICAgICAgICBMX0RJU0FCTEVfM0QgPSBmYWxzZTsKICAgICAgICA8L3NjcmlwdD4KICAgIAogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vbGVhZmxldEAxLjUuMS9kaXN0L2xlYWZsZXQuanMiPjwvc2NyaXB0PgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY29kZS5qcXVlcnkuY29tL2pxdWVyeS0xLjEyLjQubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9qcy9ib290c3RyYXAubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5qcyI+PC9zY3JpcHQ+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vbGVhZmxldEAxLjUuMS9kaXN0L2xlYWZsZXQuY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vYm9vdHN0cmFwLzMuMi4wL2Nzcy9ib290c3RyYXAubWluLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLXRoZW1lLm1pbi5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9mb250LWF3ZXNvbWUvNC42LjMvY3NzL2ZvbnQtYXdlc29tZS5taW4uY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL0xlYWZsZXQuYXdlc29tZS1tYXJrZXJzLzIuMC4yL2xlYWZsZXQuYXdlc29tZS1tYXJrZXJzLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3Jhd2Nkbi5naXRoYWNrLmNvbS9weXRob24tdmlzdWFsaXphdGlvbi9mb2xpdW0vbWFzdGVyL2ZvbGl1bS90ZW1wbGF0ZXMvbGVhZmxldC5hd2Vzb21lLnJvdGF0ZS5jc3MiLz4KICAgIDxzdHlsZT5odG1sLCBib2R5IHt3aWR0aDogMTAwJTtoZWlnaHQ6IDEwMCU7bWFyZ2luOiAwO3BhZGRpbmc6IDA7fTwvc3R5bGU+CiAgICA8c3R5bGU+I21hcCB7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7Ym90dG9tOjA7cmlnaHQ6MDtsZWZ0OjA7fTwvc3R5bGU+CiAgICAKICAgICAgICAgICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwKICAgICAgICAgICAgICAgIGluaXRpYWwtc2NhbGU9MS4wLCBtYXhpbXVtLXNjYWxlPTEuMCwgdXNlci1zY2FsYWJsZT1ubyIgLz4KICAgICAgICAgICAgPHN0eWxlPgogICAgICAgICAgICAgICAgI21hcF9hYTU5YTY0NDk5OWY0OWI4YjM1Y2Q3OWNkZGUyMDE3NCB7CiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAuMCU7CiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAuMCU7CiAgICAgICAgICAgICAgICAgICAgbGVmdDogMC4wJTsKICAgICAgICAgICAgICAgICAgICB0b3A6IDAuMCU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgCjwvaGVhZD4KPGJvZHk+ICAgIAogICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvbGl1bS1tYXAiIGlkPSJtYXBfYWE1OWE2NDQ5OTlmNDliOGIzNWNkNzljZGRlMjAxNzQiID48L2Rpdj4KICAgICAgICAKPC9ib2R5Pgo8c2NyaXB0PiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0ID0gTC5tYXAoCiAgICAgICAgICAgICAgICAibWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0IiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBjZW50ZXI6IFs1MS41MSwgLTAuMV0sCiAgICAgICAgICAgICAgICAgICAgY3JzOiBMLkNSUy5FUFNHMzg1NywKICAgICAgICAgICAgICAgICAgICB6b29tOiAxMiwKICAgICAgICAgICAgICAgICAgICB6b29tQ29udHJvbDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBwcmVmZXJDYW52YXM6IGZhbHNlLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwoKICAgICAgICAgICAgCgogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciB0aWxlX2xheWVyXzk5Mzg1ZjhkNGVmMDQ4NTU5ZjdlZmFjNjRlNmQxMmI3ID0gTC50aWxlTGF5ZXIoCiAgICAgICAgICAgICAgICAiaHR0cHM6Ly9zdGFtZW4tdGlsZXMte3N9LmEuc3NsLmZhc3RseS5uZXQvdG9uZXIve3p9L3t4fS97eX0ucG5nIiwKICAgICAgICAgICAgICAgIHsiYXR0cmlidXRpb24iOiAiTWFwIHRpbGVzIGJ5IFx1MDAzY2EgaHJlZj1cImh0dHA6Ly9zdGFtZW4uY29tXCJcdTAwM2VTdGFtZW4gRGVzaWduXHUwMDNjL2FcdTAwM2UsIHVuZGVyIFx1MDAzY2EgaHJlZj1cImh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LzMuMFwiXHUwMDNlQ0MgQlkgMy4wXHUwMDNjL2FcdTAwM2UuIERhdGEgYnkgXHUwMDI2Y29weTsgXHUwMDNjYSBocmVmPVwiaHR0cDovL29wZW5zdHJlZXRtYXAub3JnXCJcdTAwM2VPcGVuU3RyZWV0TWFwXHUwMDNjL2FcdTAwM2UsIHVuZGVyIFx1MDAzY2EgaHJlZj1cImh0dHA6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvY29weXJpZ2h0XCJcdTAwM2VPRGJMXHUwMDNjL2FcdTAwM2UuIiwgImRldGVjdFJldGluYSI6IGZhbHNlLCAibWF4TmF0aXZlWm9vbSI6IDE4LCAibWF4Wm9vbSI6IDE4LCAibWluWm9vbSI6IDAsICJub1dyYXAiOiBmYWxzZSwgIm9wYWNpdHkiOiAxLCAic3ViZG9tYWlucyI6ICJhYmMiLCAidG1zIjogZmFsc2V9CiAgICAgICAgICAgICkuYWRkVG8obWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyX2MzNmI5YmYyOGViNjQ0OTFhMDM0ZWEzODBjN2IyZjc4ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNTEyODMzLCAtMC4xMjc2OTVdLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWE1OWE2NDQ5OTlmNDliOGIzNWNkNzljZGRlMjAxNzQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uX2QxYTVkMjRmMmUyZDQ4MTE5N2QwNDViZDFkMzZlOWQ0ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJwaWN0dXJlIiwgImljb25Db2xvciI6ICJvcmFuZ2UiLCAibWFya2VyQ29sb3IiOiAib3JhbmdlIiwgInByZWZpeCI6ICJnbHlwaGljb24ifQogICAgICAgICAgICApOwogICAgICAgICAgICBtYXJrZXJfYzM2YjliZjI4ZWI2NDQ5MWEwMzRlYTM4MGM3YjJmNzguc2V0SWNvbihpY29uX2QxYTVkMjRmMmUyZDQ4MTE5N2QwNDViZDFkMzZlOWQ0KTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF8yMjdjY2QyOGMxZTE0ZWVmOTllN2Q0YzUzZDExNzM0ZiA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfY2Q0NGY3ZTUxMGQ5NDIxMWE0Y2RjNjYxMDYyZjc2MTcgPSAkKGA8ZGl2IGlkPSJodG1sX2NkNDRmN2U1MTBkOTQyMTFhNGNkYzY2MTA2MmY3NjE3IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij50aGUgbW91c2V0cmFwPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzIyN2NjZDI4YzFlMTRlZWY5OWU3ZDRjNTNkMTE3MzRmLnNldENvbnRlbnQoaHRtbF9jZDQ0ZjdlNTEwZDk0MjExYTRjZGM2NjEwNjJmNzYxNyk7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl9jMzZiOWJmMjhlYjY0NDkxYTAzNGVhMzgwYzdiMmY3OC5iaW5kUG9wdXAocG9wdXBfMjI3Y2NkMjhjMWUxNGVlZjk5ZTdkNGM1M2QxMTczNGYpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfNzRkZWJjY2VkZTAzNDJhM2I3MDE4OWNjNWUxMGU2ODIgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFs1MS41MTE5OTg5OTk5OTk5OTYsIC0wLjEyMjc2NTAwMDAwMDAwMDAxXSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgaWNvbl83NmE5OWIyMWQ5NWI0NjUxYmE1M2Q1MGJiMTVkZTdkOCA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbigKICAgICAgICAgICAgICAgIHsiZXh0cmFDbGFzc2VzIjogImZhLXJvdGF0ZS0wIiwgImljb24iOiAiY2FtZXJhIiwgImljb25Db2xvciI6ICJiZWlnZSIsICJtYXJrZXJDb2xvciI6ICJvcmFuZ2UiLCAicHJlZml4IjogImdseXBoaWNvbiJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl83NGRlYmNjZWRlMDM0MmEzYjcwMTg5Y2M1ZTEwZTY4Mi5zZXRJY29uKGljb25fNzZhOTliMjFkOTViNDY1MWJhNTNkNTBiYjE1ZGU3ZDgpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzQyMmYwMDY2ZWRkNTRhYThiODVlZmRjZTQwZTI2ZTRkID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF9kMGEwMzg3N2YxMTI0NGZiOGI4M2I4NjQyNDJkYjgwNyA9ICQoYDxkaXYgaWQ9Imh0bWxfZDBhMDM4NzdmMTEyNDRmYjhiODNiODY0MjQyZGI4MDciIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNvdmVudCBHYXJkZW4gTWFya2V0PC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzQyMmYwMDY2ZWRkNTRhYThiODVlZmRjZTQwZTI2ZTRkLnNldENvbnRlbnQoaHRtbF9kMGEwMzg3N2YxMTI0NGZiOGI4M2I4NjQyNDJkYjgwNyk7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl83NGRlYmNjZWRlMDM0MmEzYjcwMTg5Y2M1ZTEwZTY4Mi5iaW5kUG9wdXAocG9wdXBfNDIyZjAwNjZlZGQ1NGFhOGI4NWVmZGNlNDBlMjZlNGQpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfYjYwN2MzMmIwZDA0NGE3MzllZDVjOTZjYzE5YzhmYjAgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFs1MS40OTkyOTIsIC0wLjEyNzMwOTk5OTk5OTk5OTk4XSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgaWNvbl82NmNmYjY3OWQxZjM0MzU2OWI2MGNiMjFmMWM1NTcyYSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbigKICAgICAgICAgICAgICAgIHsiZXh0cmFDbGFzc2VzIjogImZhLXJvdGF0ZS0wIiwgImljb24iOiAiY2FtZXJhIiwgImljb25Db2xvciI6ICJiZWlnZSIsICJtYXJrZXJDb2xvciI6ICJvcmFuZ2UiLCAicHJlZml4IjogImdseXBoaWNvbiJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl9iNjA3YzMyYjBkMDQ0YTczOWVkNWM5NmNjMTljOGZiMC5zZXRJY29uKGljb25fNjZjZmI2NzlkMWYzNDM1NjliNjBjYjIxZjFjNTU3MmEpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwX2Y5M2UzMzcyMzQ3NzQ3OWM4NDlhOTZjZTIzYzUxZWM3ID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF85MDVhMmM0YTJiYzQ0YTAxODljM2E0MmI1ZTgwN2RjNyA9ICQoYDxkaXYgaWQ9Imh0bWxfOTA1YTJjNGEyYmM0NGEwMTg5YzNhNDJiNWU4MDdkYzciIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkFiYmF5ZSBkZSBXZXN0bWluc3RlcjwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9mOTNlMzM3MjM0Nzc0NzljODQ5YTk2Y2UyM2M1MWVjNy5zZXRDb250ZW50KGh0bWxfOTA1YTJjNGEyYmM0NGEwMTg5YzNhNDJiNWU4MDdkYzcpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfYjYwN2MzMmIwZDA0NGE3MzllZDVjOTZjYzE5YzhmYjAuYmluZFBvcHVwKHBvcHVwX2Y5M2UzMzcyMzQ3NzQ3OWM4NDlhOTZjZTIzYzUxZWM3KQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyXzViYmQ0ZjQ0ZWUyYTRlOThiZDQ4MDczOWVjMDUzOWJkID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNTExMiwgLTAuMDgzNTQwOTk5OTk5OTk5OTldLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWE1OWE2NDQ5OTlmNDliOGIzNWNkNzljZGRlMjAxNzQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uX2ZmZTE1MDJmNzM3YTQwMmZhNjFhZmFkZDE2MGQ1YzRhID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJwaWN0dXJlIiwgImljb25Db2xvciI6ICJvcmFuZ2UiLCAibWFya2VyQ29sb3IiOiAibGlnaHRncmVlbiIsICJwcmVmaXgiOiAiZ2x5cGhpY29uIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyXzViYmQ0ZjQ0ZWUyYTRlOThiZDQ4MDczOWVjMDUzOWJkLnNldEljb24oaWNvbl9mZmUxNTAyZjczN2E0MDJmYTYxYWZhZGQxNjBkNWM0YSk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfY2NmN2VjZDhhZDIwNGNkZDljOTA1ZTNmMWU4OWJhZmUgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzdlM2EzN2JmYjM1MDQzZTg4NDUxYWQ5YTljMTkyNGVkID0gJChgPGRpdiBpZD0iaHRtbF83ZTNhMzdiZmIzNTA0M2U4ODQ1MWFkOWE5YzE5MjRlZCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+U2t5IEdhcmRlbjwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9jY2Y3ZWNkOGFkMjA0Y2RkOWM5MDVlM2YxZTg5YmFmZS5zZXRDb250ZW50KGh0bWxfN2UzYTM3YmZiMzUwNDNlODg0NTFhZDlhOWMxOTI0ZWQpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfNWJiZDRmNDRlZTJhNGU5OGJkNDgwNzM5ZWMwNTM5YmQuYmluZFBvcHVwKHBvcHVwX2NjZjdlY2Q4YWQyMDRjZGQ5YzkwNWUzZjFlODliYWZlKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyX2NmODY0MjBiMWI4OTRjOTFiZGQzZjExZDY0MWQyNzYwID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNTUxNzA0LCAtMC4xNTg4MjZdLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWE1OWE2NDQ5OTlmNDliOGIzNWNkNzljZGRlMjAxNzQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uXzJmZGUyMWViNjE5YTRiZGNhZmZmZDcwOTAyMjZhYmIwID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJjYW1lcmEiLCAiaWNvbkNvbG9yIjogImJlaWdlIiwgIm1hcmtlckNvbG9yIjogIm9yYW5nZSIsICJwcmVmaXgiOiAiZ2x5cGhpY29uIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyX2NmODY0MjBiMWI4OTRjOTFiZGQzZjExZDY0MWQyNzYwLnNldEljb24oaWNvbl8yZmRlMjFlYjYxOWE0YmRjYWZmZmQ3MDkwMjI2YWJiMCk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfNTJkNzkzOGZlZTBkNDU2YmJlZjllN2RjOTc5NDY5MmUgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzExYmRkNDdmMzdjNTQ4NWZiMTQ1YzUyOWRmZmUxNGRmID0gJChgPGRpdiBpZD0iaHRtbF8xMWJkZDQ3ZjM3YzU0ODVmYjE0NWM1MjlkZmZlMTRkZiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2FtZGVuIE1hcmtldDwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF81MmQ3OTM4ZmVlMGQ0NTZiYmVmOWU3ZGM5Nzk0NjkyZS5zZXRDb250ZW50KGh0bWxfMTFiZGQ0N2YzN2M1NDg1ZmIxNDVjNTI5ZGZmZTE0ZGYpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfY2Y4NjQyMGIxYjg5NGM5MWJkZDNmMTFkNjQxZDI3NjAuYmluZFBvcHVwKHBvcHVwXzUyZDc5MzhmZWUwZDQ1NmJiZWY5ZTdkYzk3OTQ2OTJlKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyX2I2NDk1ODQ5NTFmZjRiYjJhYTJlZTlmZTgzYzI0MTFjID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNTA1NDQsIC0wLjA5MTA2MV0sCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApLmFkZFRvKG1hcF9hYTU5YTY0NDk5OWY0OWI4YjM1Y2Q3OWNkZGUyMDE3NCk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGljb25fN2RhYzMxMWQzMjRhNGRjNzgzYzBmMDI5YmY4YzUzNWMgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oCiAgICAgICAgICAgICAgICB7ImV4dHJhQ2xhc3NlcyI6ICJmYS1yb3RhdGUtMCIsICJpY29uIjogImN1dGxlcnkiLCAiaWNvbkNvbG9yIjogImxpbWVncmVlbiIsICJtYXJrZXJDb2xvciI6ICJsaWdodGdyZWVuIiwgInByZWZpeCI6ICJnbHlwaGljb24ifQogICAgICAgICAgICApOwogICAgICAgICAgICBtYXJrZXJfYjY0OTU4NDk1MWZmNGJiMmFhMmVlOWZlODNjMjQxMWMuc2V0SWNvbihpY29uXzdkYWMzMTFkMzI0YTRkYzc4M2MwZjAyOWJmOGM1MzVjKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF9kYmYzMGRhZTQwNjA0YjNlYWQzYTQ4M2YwYzc4NWE0MiA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfNTA5MzA4YTFlMTZmNGIwMGIzYTdkMmExMWIxMTg2YWQgPSAkKGA8ZGl2IGlkPSJodG1sXzUwOTMwOGExZTE2ZjRiMDBiM2E3ZDJhMTFiMTE4NmFkIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Cb3JvdWdoIE1hcmtldDwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9kYmYzMGRhZTQwNjA0YjNlYWQzYTQ4M2YwYzc4NWE0Mi5zZXRDb250ZW50KGh0bWxfNTA5MzA4YTFlMTZmNGIwMGIzYTdkMmExMWIxMTg2YWQpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfYjY0OTU4NDk1MWZmNGJiMmFhMmVlOWZlODNjMjQxMWMuYmluZFBvcHVwKHBvcHVwX2RiZjMwZGFlNDA2MDRiM2VhZDNhNDgzZjBjNzg1YTQyKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyXzNmMDdhMTM4MDcyZjQ1OGVhMmY2NDI4MWJkYzVhYzkxID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNTA1ODM3LCAtMC4xODc3MjRdLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWE1OWE2NDQ5OTlmNDliOGIzNWNkNzljZGRlMjAxNzQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uX2RkNzViYjg1NGM3ZDQzMGQ5ZGJlNzZiMmJhNDQ5OWRjID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJjdXRsZXJ5IiwgImljb25Db2xvciI6ICJsaW1lZ3JlZW4iLCAibWFya2VyQ29sb3IiOiAibGltZWdyZWVuIiwgInByZWZpeCI6ICJnbHlwaGljb24ifQogICAgICAgICAgICApOwogICAgICAgICAgICBtYXJrZXJfM2YwN2ExMzgwNzJmNDU4ZWEyZjY0MjgxYmRjNWFjOTEuc2V0SWNvbihpY29uX2RkNzViYjg1NGM3ZDQzMGQ5ZGJlNzZiMmJhNDQ5OWRjKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF9kMGI0ZDlhOGVhNmI0ZjhhYmFmZTQ3ZGMwN2JlNzM1ZiA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfODkzNmRiZGY4ZWY3NDMwZWIyM2QxMjFiYjhjODAzODIgPSAkKGA8ZGl2IGlkPSJodG1sXzg5MzZkYmRmOGVmNzQzMGViMjNkMTIxYmI4YzgwMzgyIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij50aGUgT3Jhbmdlcnk8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfZDBiNGQ5YThlYTZiNGY4YWJhZmU0N2RjMDdiZTczNWYuc2V0Q29udGVudChodG1sXzg5MzZkYmRmOGVmNzQzMGViMjNkMTIxYmI4YzgwMzgyKTsKICAgICAgICAKCiAgICAgICAgbWFya2VyXzNmMDdhMTM4MDcyZjQ1OGVhMmY2NDI4MWJkYzVhYzkxLmJpbmRQb3B1cChwb3B1cF9kMGI0ZDlhOGVhNmI0ZjhhYmFmZTQ3ZGMwN2JlNzM1ZikKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIG1hcmtlcl84ZWZhZDVkMzg3NDg0MDFlOTk3OTU3MDlhODAxMDAxYiA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzUxLjUxMTQ5NCwgLTAuMTIwMDk4Ml0sCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApLmFkZFRvKG1hcF9hYTU5YTY0NDk5OWY0OWI4YjM1Y2Q3OWNkZGUyMDE3NCk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGljb25fODRhYzVjMDNiMGRhNDc1MDg0ZGY3ODY2YzFkZmIxZTggPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oCiAgICAgICAgICAgICAgICB7ImV4dHJhQ2xhc3NlcyI6ICJmYS1yb3RhdGUtMCIsICJpY29uIjogInBpY3R1cmUiLCAiaWNvbkNvbG9yIjogIm9yYW5nZSIsICJtYXJrZXJDb2xvciI6ICJvcmFuZ2UiLCAicHJlZml4IjogImdseXBoaWNvbiJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl84ZWZhZDVkMzg3NDg0MDFlOTk3OTU3MDlhODAxMDAxYi5zZXRJY29uKGljb25fODRhYzVjMDNiMGRhNDc1MDg0ZGY3ODY2YzFkZmIxZTgpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzA3YTEyZmRhNWMzOTRlNzdhZDZlNDliZTZiNTdlODFmID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF9hOTNmOGMzZmE4NTc0Y2YwODQ2NmUwMTExMTk3ZmFkMCA9ICQoYDxkaXYgaWQ9Imh0bWxfYTkzZjhjM2ZhODU3NGNmMDg0NjZlMDExMTE5N2ZhZDAiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPktpbmcgTGlvbjwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF8wN2ExMmZkYTVjMzk0ZTc3YWQ2ZTQ5YmU2YjU3ZTgxZi5zZXRDb250ZW50KGh0bWxfYTkzZjhjM2ZhODU3NGNmMDg0NjZlMDExMTE5N2ZhZDApOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfOGVmYWQ1ZDM4NzQ4NDAxZTk5Nzk1NzA5YTgwMTAwMWIuYmluZFBvcHVwKHBvcHVwXzA3YTEyZmRhNWMzOTRlNzdhZDZlNDliZTZiNTdlODFmKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyX2NiY2QyMDJlYzg0ZDRhMjJiZjc5OTAwODBkYTM5ZjdhID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNDcwNjUyLCAtMC4wNjgyODMwMDAwMDAwMDAwMV0sCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApLmFkZFRvKG1hcF9hYTU5YTY0NDk5OWY0OWI4YjM1Y2Q3OWNkZGUyMDE3NCk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGljb25fZDU4MzFhMGI1NDhmNDZmNTkxYzk4MzZkOTI5ZjMwMTggPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oCiAgICAgICAgICAgICAgICB7ImV4dHJhQ2xhc3NlcyI6ICJmYS1yb3RhdGUtMCIsICJpY29uIjogImdsYXNzIiwgImljb25Db2xvciI6ICJkYXJrZ3JlZW4iLCAibWFya2VyQ29sb3IiOiAiYmVpZ2UiLCAicHJlZml4IjogImdseXBoaWNvbiJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl9jYmNkMjAyZWM4NGQ0YTIyYmY3OTkwMDgwZGEzOWY3YS5zZXRJY29uKGljb25fZDU4MzFhMGI1NDhmNDZmNTkxYzk4MzZkOTI5ZjMwMTgpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzU5NmMwNDgyN2IwZTRjNWRhZjkyYzkwMmIxODQxY2Q1ID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF9hZWVhMzA2NjIyODg0ZTU5ODQxYjhmNzI1ZjBkMzY3NCA9ICQoYDxkaXYgaWQ9Imh0bWxfYWVlYTMwNjYyMjg4NGU1OTg0MWI4ZjcyNWYwZDM2NzQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkZyYW5rcyBDYWZlPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzU5NmMwNDgyN2IwZTRjNWRhZjkyYzkwMmIxODQxY2Q1LnNldENvbnRlbnQoaHRtbF9hZWVhMzA2NjIyODg0ZTU5ODQxYjhmNzI1ZjBkMzY3NCk7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl9jYmNkMjAyZWM4NGQ0YTIyYmY3OTkwMDgwZGEzOWY3YS5iaW5kUG9wdXAocG9wdXBfNTk2YzA0ODI3YjBlNGM1ZGFmOTJjOTAyYjE4NDFjZDUpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfMWE1Y2E2NjBlZGJjNGEwOWI1NDIxOWM4NDA0NDQ4ZmQgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFs1MS40OTAwNTYsIC0wLjE5MTExOV0sCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApLmFkZFRvKG1hcF9hYTU5YTY0NDk5OWY0OWI4YjM1Y2Q3OWNkZGUyMDE3NCk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGljb25fYjFiMzhhOWQ4ZTU2NDY3MDgwZjc2NGI3YmRkNGYwMDIgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oCiAgICAgICAgICAgICAgICB7ImV4dHJhQ2xhc3NlcyI6ICJmYS1yb3RhdGUtMCIsICJpY29uIjogImdsYXNzIiwgImljb25Db2xvciI6ICJkYXJrZ3JlZW4iLCAibWFya2VyQ29sb3IiOiAibGltZWdyZWVuIiwgInByZWZpeCI6ICJnbHlwaGljb24ifQogICAgICAgICAgICApOwogICAgICAgICAgICBtYXJrZXJfMWE1Y2E2NjBlZGJjNGEwOWI1NDIxOWM4NDA0NDQ4ZmQuc2V0SWNvbihpY29uX2IxYjM4YTlkOGU1NjQ2NzA4MGY3NjRiN2JkZDRmMDAyKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF9kYTBjNjg4OWRhNmQ0MjI2OTUxZWYzNDk1MjA0ZDQzZiA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfY2Q2YzI0NGEyODJlNDNhMzhhZWY4MzY0MzFlNzNkZmEgPSAkKGA8ZGl2IGlkPSJodG1sX2NkNmMyNDRhMjgyZTQzYTM4YWVmODM2NDMxZTczZGZhIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5ldmFucyBhbmQgcGVlbCBkZXRlY3RpdmUgYWdlbmN5PC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwX2RhMGM2ODg5ZGE2ZDQyMjY5NTFlZjM0OTUyMDRkNDNmLnNldENvbnRlbnQoaHRtbF9jZDZjMjQ0YTI4MmU0M2EzOGFlZjgzNjQzMWU3M2RmYSk7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl8xYTVjYTY2MGVkYmM0YTA5YjU0MjE5Yzg0MDQ0NDhmZC5iaW5kUG9wdXAocG9wdXBfZGEwYzY4ODlkYTZkNDIyNjk1MWVmMzQ5NTIwNGQ0M2YpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfODEzZTY1YTE2Mzk2NGRkNjlhNzU1ZDUyMTYzMTQ1MjYgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFs1MS41MTI3NDYsIC0wLjE0MTU1Mjk5OTk5OTk5OTk4XSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgaWNvbl80MDFiZDQyMzVmYjU0YzMxOTRjMDc2ZDU0ZmExOTQxMCA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbigKICAgICAgICAgICAgICAgIHsiZXh0cmFDbGFzc2VzIjogImZhLXJvdGF0ZS0wIiwgImljb24iOiAiY3V0bGVyeSIsICJpY29uQ29sb3IiOiAibGltZWdyZWVuIiwgIm1hcmtlckNvbG9yIjogIm9yYW5nZSIsICJwcmVmaXgiOiAiZ2x5cGhpY29uIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyXzgxM2U2NWExNjM5NjRkZDY5YTc1NWQ1MjE2MzE0NTI2LnNldEljb24oaWNvbl80MDFiZDQyMzVmYjU0YzMxOTRjMDc2ZDU0ZmExOTQxMCk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfMmVjNjllODNkY2FkNGU1NWE2ZTAwZGJjNzU1OGFmOGMgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzU0ODY4YzBmNDc4YTQyMTI5NWFkOTU0NDViNTA1YzVhID0gJChgPGRpdiBpZD0iaHRtbF81NDg2OGMwZjQ3OGE0MjEyOTVhZDk1NDQ1YjUwNWM1YSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+c2tldGNoIGxvbmRvbjwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF8yZWM2OWU4M2RjYWQ0ZTU1YTZlMDBkYmM3NTU4YWY4Yy5zZXRDb250ZW50KGh0bWxfNTQ4NjhjMGY0NzhhNDIxMjk1YWQ5NTQ0NWI1MDVjNWEpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfODEzZTY1YTE2Mzk2NGRkNjlhNzU1ZDUyMTYzMTQ1MjYuYmluZFBvcHVwKHBvcHVwXzJlYzY5ZTgzZGNhZDRlNTVhNmUwMGRiYzc1NThhZjhjKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyX2E2NmRiNTI4YzI0NzQ0ZWJhNWIxN2M2NDZlN2EzYjEzID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNTI4NDkwMDAwMDAwMDA1LCAtMC4wODQ3MjhdLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWE1OWE2NDQ5OTlmNDliOGIzNWNkNzljZGRlMjAxNzQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uX2IxMDA5OTk1ZDJlNzRhOWNhYzQ3MmEzMzMyZDA3MmFhID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJwaWN0dXJlIiwgImljb25Db2xvciI6ICJvcmFuZ2UiLCAibWFya2VyQ29sb3IiOiAibGlnaHRncmVlbiIsICJwcmVmaXgiOiAiZ2x5cGhpY29uIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyX2E2NmRiNTI4YzI0NzQ0ZWJhNWIxN2M2NDZlN2EzYjEzLnNldEljb24oaWNvbl9iMTAwOTk5NWQyZTc0YTljYWM0NzJhMzMzMmQwNzJhYSk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfZTI5MGYyOWZmY2M3NGIwNzljYjY0OWNlZjNmMGIzMTAgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzFhNmU2OGI3NTg3ZjQ4M2FiOThmMzQ0YzBmMTQyNjcxID0gJChgPGRpdiBpZD0iaHRtbF8xYTZlNjhiNzU4N2Y0ODNhYjk4ZjM0NGMwZjE0MjY3MSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Z3JhZmZpdGkgd29ya3Nob3AgaW4gU2hvcmVkaXRjaOKAmXMgYXJlYTwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9lMjkwZjI5ZmZjYzc0YjA3OWNiNjQ5Y2VmM2YwYjMxMC5zZXRDb250ZW50KGh0bWxfMWE2ZTY4Yjc1ODdmNDgzYWI5OGYzNDRjMGYxNDI2NzEpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfYTY2ZGI1MjhjMjQ3NDRlYmE1YjE3YzY0NmU3YTNiMTMuYmluZFBvcHVwKHBvcHVwX2UyOTBmMjlmZmNjNzRiMDc5Y2I2NDljZWYzZjBiMzEwKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyXzZhOTgwM2M1MDk1YTRmNjFiZmUwOGE2N2JhOGVhOTA2ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNTA2MDQyMSwgLTAuMDE3MzQyNzAwMDAwMDAwMDAzXSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgaWNvbl80NzIxMTE2OWYwMzE0MmIzYmJmMGJmODE5NjY3NjRiNCA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbigKICAgICAgICAgICAgICAgIHsiZXh0cmFDbGFzc2VzIjogImZhLXJvdGF0ZS0wIiwgImljb24iOiAiY3V0bGVyeSIsICJpY29uQ29sb3IiOiAibGltZWdyZWVuIiwgIm1hcmtlckNvbG9yIjogImJlaWdlIiwgInByZWZpeCI6ICJnbHlwaGljb24ifQogICAgICAgICAgICApOwogICAgICAgICAgICBtYXJrZXJfNmE5ODAzYzUwOTVhNGY2MWJmZTA4YTY3YmE4ZWE5MDYuc2V0SWNvbihpY29uXzQ3MjExMTY5ZjAzMTQyYjNiYmYwYmY4MTk2Njc2NGI0KTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF9hMGNjZmRiNTI1NDM0Nzg2YWU2MjNkNjQ5MTMxZTkxMCA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfNjdiNWY3NzEyYTQ0NDU1YWI4YzhhYzI2MDY0YTc5ZjIgPSAkKGA8ZGl2IGlkPSJodG1sXzY3YjVmNzcxMmE0NDQ1NWFiOGM4YWMyNjA2NGE3OWYyIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5HaWFudCBSb2JvdDwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9hMGNjZmRiNTI1NDM0Nzg2YWU2MjNkNjQ5MTMxZTkxMC5zZXRDb250ZW50KGh0bWxfNjdiNWY3NzEyYTQ0NDU1YWI4YzhhYzI2MDY0YTc5ZjIpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfNmE5ODAzYzUwOTVhNGY2MWJmZTA4YTY3YmE4ZWE5MDYuYmluZFBvcHVwKHBvcHVwX2EwY2NmZGI1MjU0MzQ3ODZhZTYyM2Q2NDkxMzFlOTEwKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyXzNlMWVkOTJhYzY0MDRlNjM4MTExZjY4MjRjNTBkYjUxID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNTIzMzg1LCAtMC4wNzg4ODldLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWE1OWE2NDQ5OTlmNDliOGIzNWNkNzljZGRlMjAxNzQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uX2JmZWU1NzZhZDQ4MzQ2ZTA5OGJiYzI5NWVmM2U5ODBlID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJjdXRsZXJ5IiwgImljb25Db2xvciI6ICJsaW1lZ3JlZW4iLCAibWFya2VyQ29sb3IiOiAibGlnaHRncmVlbiIsICJwcmVmaXgiOiAiZ2x5cGhpY29uIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyXzNlMWVkOTJhYzY0MDRlNjM4MTExZjY4MjRjNTBkYjUxLnNldEljb24oaWNvbl9iZmVlNTc2YWQ0ODM0NmUwOThiYmMyOTVlZjNlOTgwZSk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfMmZjZGExYTMzN2Y2NDM0OTk4YjE0MzA0NDlmZTNlZjAgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzkxNTA4ZTQxNzc2MDRlZTliNzFkMzhjY2JjMWZkOTQ0ID0gJChgPGRpdiBpZD0iaHRtbF85MTUwOGU0MTc3NjA0ZWU5YjcxZDM4Y2NiYzFmZDk0NCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RGluZXJhbWE8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfMmZjZGExYTMzN2Y2NDM0OTk4YjE0MzA0NDlmZTNlZjAuc2V0Q29udGVudChodG1sXzkxNTA4ZTQxNzc2MDRlZTliNzFkMzhjY2JjMWZkOTQ0KTsKICAgICAgICAKCiAgICAgICAgbWFya2VyXzNlMWVkOTJhYzY0MDRlNjM4MTExZjY4MjRjNTBkYjUxLmJpbmRQb3B1cChwb3B1cF8yZmNkYTFhMzM3ZjY0MzQ5OThiMTQzMDQ0OWZlM2VmMCkKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIG1hcmtlcl9kNTA4ZGExMDc4ZWY0MzBkYjg0YTExYWFlNzIwNzE0OSA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzUxLjQ5NzYzOTQsIC0wLjA0Mzg4NTNdLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWE1OWE2NDQ5OTlmNDliOGIzNWNkNzljZGRlMjAxNzQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uXzY1NDRiZGVlOWQzNTQwYzc4YzkzYjQwMGQxYTMzY2Y1ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJjdXRsZXJ5IiwgImljb25Db2xvciI6ICJsaW1lZ3JlZW4iLCAibWFya2VyQ29sb3IiOiAiYmVpZ2UiLCAicHJlZml4IjogImdseXBoaWNvbiJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl9kNTA4ZGExMDc4ZWY0MzBkYjg0YTExYWFlNzIwNzE0OS5zZXRJY29uKGljb25fNjU0NGJkZWU5ZDM1NDBjNzhjOTNiNDAwZDFhMzNjZjUpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzg1Mzk1MTRlN2MzZDQ4NTY5NzA3NDhmZGEwNzM1N2Q4ID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF8xMTk1ZGZkZWU5YzQ0NTdlYmRlNGJiYTIwYTU5MTAxOSA9ICQoYDxkaXYgaWQ9Imh0bWxfMTE5NWRmZGVlOWM0NDU3ZWJkZTRiYmEyMGE1OTEwMTkiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkhhd2tlciBIb3VzZTwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF84NTM5NTE0ZTdjM2Q0ODU2OTcwNzQ4ZmRhMDczNTdkOC5zZXRDb250ZW50KGh0bWxfMTE5NWRmZGVlOWM0NDU3ZWJkZTRiYmEyMGE1OTEwMTkpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfZDUwOGRhMTA3OGVmNDMwZGI4NGExMWFhZTcyMDcxNDkuYmluZFBvcHVwKHBvcHVwXzg1Mzk1MTRlN2MzZDQ4NTY5NzA3NDhmZGEwNzM1N2Q4KQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyX2QwYWNlYTU0MTQ1ODQ2YTk4ZTkyMzlkMmFkOTlmMjI4ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNTI4NDM2LCAtMC4wNzE0NDE5OTk5OTk5OTk5OV0sCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApLmFkZFRvKG1hcF9hYTU5YTY0NDk5OWY0OWI4YjM1Y2Q3OWNkZGUyMDE3NCk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGljb25fZGUzYTY3ZDExMWZhNGNjNmIyZjQ5MDgwZTk3NTVjNjkgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oCiAgICAgICAgICAgICAgICB7ImV4dHJhQ2xhc3NlcyI6ICJmYS1yb3RhdGUtMCIsICJpY29uIjogInBpY3R1cmUiLCAiaWNvbkNvbG9yIjogIm9yYW5nZSIsICJtYXJrZXJDb2xvciI6ICJsaWdodGdyZWVuIiwgInByZWZpeCI6ICJnbHlwaGljb24ifQogICAgICAgICAgICApOwogICAgICAgICAgICBtYXJrZXJfZDBhY2VhNTQxNDU4NDZhOThlOTIzOWQyYWQ5OWYyMjguc2V0SWNvbihpY29uX2RlM2E2N2QxMTFmYTRjYzZiMmY0OTA4MGU5NzU1YzY5KTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF9hY2Q5ZDcxMDJjYmM0YWJiOGNlMzk0M2U3ZDMxNTRlMCA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfOTg1NGEzYTMzZjlmNDMyNmI1ZTIwMzMwOWIxODQ1ZjMgPSAkKGA8ZGl2IGlkPSJodG1sXzk4NTRhM2EzM2Y5ZjQzMjZiNWUyMDMzMDliMTg0NWYzIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Db2x1bWJpYSBSb2FkPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwX2FjZDlkNzEwMmNiYzRhYmI4Y2UzOTQzZTdkMzE1NGUwLnNldENvbnRlbnQoaHRtbF85ODU0YTNhMzNmOWY0MzI2YjVlMjAzMzA5YjE4NDVmMyk7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl9kMGFjZWE1NDE0NTg0NmE5OGU5MjM5ZDJhZDk5ZjIyOC5iaW5kUG9wdXAocG9wdXBfYWNkOWQ3MTAyY2JjNGFiYjhjZTM5NDNlN2QzMTU0ZTApCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfYTk0NDVjNjRjYmZhNDdjMThmZDc1MTUzYWU0OTY4ZjMgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFs1MS41MTE0ODgsIC0wLjEzMDMyMV0sCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApLmFkZFRvKG1hcF9hYTU5YTY0NDk5OWY0OWI4YjM1Y2Q3OWNkZGUyMDE3NCk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGljb25fNjc4OTMzYmEyMzI4NDNkNWE0ZjFlY2NiODJkMDA0NmYgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oCiAgICAgICAgICAgICAgICB7ImV4dHJhQ2xhc3NlcyI6ICJmYS1yb3RhdGUtMCIsICJpY29uIjogInBpY3R1cmUiLCAiaWNvbkNvbG9yIjogIm9yYW5nZSIsICJtYXJrZXJDb2xvciI6ICJvcmFuZ2UiLCAicHJlZml4IjogImdseXBoaWNvbiJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl9hOTQ0NWM2NGNiZmE0N2MxOGZkNzUxNTNhZTQ5NjhmMy5zZXRJY29uKGljb25fNjc4OTMzYmEyMzI4NDNkNWE0ZjFlY2NiODJkMDA0NmYpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwX2Q4NGVlY2ZmYTI0MTQyNzhiNGZlYzNmMDYwMzliMzA2ID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF85OTcwMTEyYmU0NWQ0YWNjYjdkZTU0ZDAwNjg5NzMwZiA9ICQoYDxkaXYgaWQ9Imh0bWxfOTk3MDExMmJlNDVkNGFjY2I3ZGU1NGQwMDY4OTczMGYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlByaW5jZSBDaGFybGVzIGNpbmVtYVw8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfZDg0ZWVjZmZhMjQxNDI3OGI0ZmVjM2YwNjAzOWIzMDYuc2V0Q29udGVudChodG1sXzk5NzAxMTJiZTQ1ZDRhY2NiN2RlNTRkMDA2ODk3MzBmKTsKICAgICAgICAKCiAgICAgICAgbWFya2VyX2E5NDQ1YzY0Y2JmYTQ3YzE4ZmQ3NTE1M2FlNDk2OGYzLmJpbmRQb3B1cChwb3B1cF9kODRlZWNmZmEyNDE0Mjc4YjRmZWMzZjA2MDM5YjMwNikKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIG1hcmtlcl9kN2I2OGZhMTA5OGI0YjViYTIwYWM1YWIyMDBmZTc5YiA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzUxLjUxMzE0NiwgLTAuMTI5ODA3XSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgaWNvbl81Yjk4ODBjODM3MzA0YWI1YTAyNjA3MTU5ZmU4YmNkOCA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbigKICAgICAgICAgICAgICAgIHsiZXh0cmFDbGFzc2VzIjogImZhLXJvdGF0ZS0wIiwgImljb24iOiAicGljdHVyZSIsICJpY29uQ29sb3IiOiAib3JhbmdlIiwgIm1hcmtlckNvbG9yIjogIm9yYW5nZSIsICJwcmVmaXgiOiAiZ2x5cGhpY29uIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyX2Q3YjY4ZmExMDk4YjRiNWJhMjBhYzVhYjIwMGZlNzliLnNldEljb24oaWNvbl81Yjk4ODBjODM3MzA0YWI1YTAyNjA3MTU5ZmU4YmNkOCk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfYTU4ODM4N2JlZWM2NDQyYjllNWMxODA5MmUyYmQyZjMgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzhkMWJmYzA0YTk2YzQwOWQ5Njk4NGYzYzE2ZjhkNDZhID0gJChgPGRpdiBpZD0iaHRtbF84ZDFiZmMwNGE5NmM0MDlkOTY5ODRmM2MxNmY4ZDQ2YSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UGFsYWNlIFRoZWF0cmUgTG9uZG9uIC0gSGFycnkgUG90dGVyIGFuZCB0aGUgQ3Vyc2VkIENoaWxkPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwX2E1ODgzODdiZWVjNjQ0MmI5ZTVjMTgwOTJlMmJkMmYzLnNldENvbnRlbnQoaHRtbF84ZDFiZmMwNGE5NmM0MDlkOTY5ODRmM2MxNmY4ZDQ2YSk7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl9kN2I2OGZhMTA5OGI0YjViYTIwYWM1YWIyMDBmZTc5Yi5iaW5kUG9wdXAocG9wdXBfYTU4ODM4N2JlZWM2NDQyYjllNWMxODA5MmUyYmQyZjMpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfNThhMzVhNjc2ZTI3NGQwODljNmJmNzI4YjQ3MzM4NGYgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFs1MS41MDQxOSwgLTAuMDkwMDI2XSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgaWNvbl9mNjA0YjhkZTBiODY0NzQ0OGVjODkxNDQwZWUyOGI4ZCA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbigKICAgICAgICAgICAgICAgIHsiZXh0cmFDbGFzc2VzIjogImZhLXJvdGF0ZS0wIiwgImljb24iOiAiY2FtZXJhIiwgImljb25Db2xvciI6ICJiZWlnZSIsICJtYXJrZXJDb2xvciI6ICJsaWdodGdyZWVuIiwgInByZWZpeCI6ICJnbHlwaGljb24ifQogICAgICAgICAgICApOwogICAgICAgICAgICBtYXJrZXJfNThhMzVhNjc2ZTI3NGQwODljNmJmNzI4YjQ3MzM4NGYuc2V0SWNvbihpY29uX2Y2MDRiOGRlMGI4NjQ3NDQ4ZWM4OTE0NDBlZTI4YjhkKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF9hMjIwM2Q4YTc1OTE0NzIxOWYyYWZjYTNjZjEzYjQ2ZiA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfOTA3MjBiNTdjMmYwNGJjNTgzMzIzMzU0ZjhhZGRmMmQgPSAkKGA8ZGl2IGlkPSJodG1sXzkwNzIwYjU3YzJmMDRiYzU4MzMyMzM1NGY4YWRkZjJkIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5HZW9yZ2UgSW5uPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwX2EyMjAzZDhhNzU5MTQ3MjE5ZjJhZmNhM2NmMTNiNDZmLnNldENvbnRlbnQoaHRtbF85MDcyMGI1N2MyZjA0YmM1ODMzMjMzNTRmOGFkZGYyZCk7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl81OGEzNWE2NzZlMjc0ZDA4OWM2YmY3MjhiNDczMzg0Zi5iaW5kUG9wdXAocG9wdXBfYTIyMDNkOGE3NTkxNDcyMTlmMmFmY2EzY2YxM2I0NmYpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfZTFiM2QzZTEyYjBhNDAxNTg0MDBmN2I3NjlkNTUyOGIgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFs1MS41MjcyNTI4LCAtMC4wODg3NTQ1XSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgaWNvbl80ZmMwYWJiOTg4YzM0MGFlYTA3MGM5YWMxYjJjOGExNCA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbigKICAgICAgICAgICAgICAgIHsiZXh0cmFDbGFzc2VzIjogImZhLXJvdGF0ZS0wIiwgImljb24iOiAicGljdHVyZSIsICJpY29uQ29sb3IiOiAib3JhbmdlIiwgIm1hcmtlckNvbG9yIjogImxpZ2h0Z3JlZW4iLCAicHJlZml4IjogImdseXBoaWNvbiJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl9lMWIzZDNlMTJiMGE0MDE1ODQwMGY3Yjc2OWQ1NTI4Yi5zZXRJY29uKGljb25fNGZjMGFiYjk4OGMzNDBhZWEwNzBjOWFjMWIyYzhhMTQpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzFlMWEyOGEwNjM3YzRlNzg4NmUwNjk3OTk5MDJkNDFkID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF9mMDRmYTFkMDJkMjM0M2E5YjI2YjI3OTVkMjFjYzUwNCA9ICQoYDxkaXYgaWQ9Imh0bWxfZjA0ZmExZDAyZDIzNDNhOWIyNmIyNzk1ZDIxY2M1MDQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlRoZSBTZWxmaWUgZmFjdG9yeTwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF8xZTFhMjhhMDYzN2M0ZTc4ODZlMDY5Nzk5OTAyZDQxZC5zZXRDb250ZW50KGh0bWxfZjA0ZmExZDAyZDIzNDNhOWIyNmIyNzk1ZDIxY2M1MDQpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfZTFiM2QzZTEyYjBhNDAxNTg0MDBmN2I3NjlkNTUyOGIuYmluZFBvcHVwKHBvcHVwXzFlMWEyOGEwNjM3YzRlNzg4NmUwNjk3OTk5MDJkNDFkKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyX2E0NGZlNDdkZDY2NTQ0MjJhNjQyNTVkNDNhMzgwYTgwID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNTEwMTM5NSwgLTAuMTM5Mjg4NzAwMDAwMDAwMDJdLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWE1OWE2NDQ5OTlmNDliOGIzNWNkNzljZGRlMjAxNzQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uXzY3NjAyODQzOTM4NDRjNjdhZjUxNjFmZjg3NDczZjZjID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJzaG9wcGluZy1jYXJ0IiwgImljb25Db2xvciI6ICJsaWdodGdyZWVuIiwgIm1hcmtlckNvbG9yIjogIm9yYW5nZSIsICJwcmVmaXgiOiAiZ2x5cGhpY29uIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyX2E0NGZlNDdkZDY2NTQ0MjJhNjQyNTVkNDNhMzgwYTgwLnNldEljb24oaWNvbl82NzYwMjg0MzkzODQ0YzY3YWY1MTYxZmY4NzQ3M2Y2Yyk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfZjY4MmU3MzQ2Yjg2NDM3YWJkNTM3NGQwMTVhYTBlYzggPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sX2VmZTMxYmJiZTU5ODRkM2ViMGNhYjNhOTUyNzMzMGQzID0gJChgPGRpdiBpZD0iaHRtbF9lZmUzMWJiYmU1OTg0ZDNlYjBjYWIzYTk1MjczMzBkMyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+c3VpdCBzdXBwbHk8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfZjY4MmU3MzQ2Yjg2NDM3YWJkNTM3NGQwMTVhYTBlYzguc2V0Q29udGVudChodG1sX2VmZTMxYmJiZTU5ODRkM2ViMGNhYjNhOTUyNzMzMGQzKTsKICAgICAgICAKCiAgICAgICAgbWFya2VyX2E0NGZlNDdkZDY2NTQ0MjJhNjQyNTVkNDNhMzgwYTgwLmJpbmRQb3B1cChwb3B1cF9mNjgyZTczNDZiODY0MzdhYmQ1Mzc0ZDAxNWFhMGVjOCkKICAgICAgICA7CgogICAgICAgIAogICAgCjwvc2NyaXB0Pg==" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>




```python
X = df[['lat', 'lon']]
kmeans = KMeans(n_clusters=4, random_state=0).fit(X)
kmeans.labels_
```




    array([0, 0, 0, 2, 0, 2, 3, 0, 1, 3, 0, 2, 1, 2, 1, 2, 0, 0, 2, 2, 0],
          dtype=int32)




```python
df['cluster'] = kmeans.labels_
```


```python
df
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>kind</th>
      <th>experience</th>
      <th>name</th>
      <th>lat</th>
      <th>lon</th>
      <th>adress</th>
      <th>city</th>
      <th>area_name</th>
      <th>cluster</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>see</td>
      <td>theater</td>
      <td>the mousetrap</td>
      <td>51.512833</td>
      <td>-0.127695</td>
      <td>St. Martinâ€™s Theatre  West St</td>
      <td>London WC2H 9NZ</td>
      <td>NaN</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>visit</td>
      <td>market</td>
      <td>Covent Garden Market</td>
      <td>51.511999</td>
      <td>-0.122765</td>
      <td>The Market Bldg</td>
      <td>Brentford WC2E 8RF</td>
      <td>NaN</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>visit</td>
      <td>cathedral</td>
      <td>Abbaye de Westminster</td>
      <td>51.499292</td>
      <td>-0.127310</td>
      <td>20 Deans Yd Westminster</td>
      <td>London SW1P 3PA</td>
      <td>NaN</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>see</td>
      <td>view</td>
      <td>Sky Garden</td>
      <td>51.511200</td>
      <td>-0.083541</td>
      <td>20 Fenchurch St</td>
      <td>London EC3M 8AF</td>
      <td>NaN</td>
      <td>2</td>
    </tr>
    <tr>
      <th>4</th>
      <td>visit</td>
      <td>market</td>
      <td>Camden Market</td>
      <td>51.551704</td>
      <td>-0.158826</td>
      <td>NW1</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>eat</td>
      <td>market</td>
      <td>Borough Market</td>
      <td>51.505440</td>
      <td>-0.091061</td>
      <td>8 Southwark St</td>
      <td>London SE1 1TL</td>
      <td>NaN</td>
      <td>2</td>
    </tr>
    <tr>
      <th>6</th>
      <td>eat</td>
      <td>afternoon tea</td>
      <td>the Orangery</td>
      <td>51.505837</td>
      <td>-0.187724</td>
      <td>Kensington Palace  Kensington Gardens</td>
      <td>London W8 4PX</td>
      <td>NaN</td>
      <td>3</td>
    </tr>
    <tr>
      <th>7</th>
      <td>see</td>
      <td>theater</td>
      <td>King Lion</td>
      <td>51.511494</td>
      <td>-0.120098</td>
      <td>21 Wellington St, Covent Garden</td>
      <td>London WC2E 7RQ,</td>
      <td>NaN</td>
      <td>0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>drink</td>
      <td>roof top cafe</td>
      <td>Franks Cafe</td>
      <td>51.470652</td>
      <td>-0.068283</td>
      <td>Bold Tendencies 7th-10th Floor Multi Storey Ca...</td>
      <td>95A Rye Ln,  SE15 4ST</td>
      <td>NaN</td>
      <td>1</td>
    </tr>
    <tr>
      <th>9</th>
      <td>drink</td>
      <td>cocktail</td>
      <td>evans and peel detective agency</td>
      <td>51.490056</td>
      <td>-0.191119</td>
      <td>310c</td>
      <td>London SW5 9BA</td>
      <td>NaN</td>
      <td>3</td>
    </tr>
    <tr>
      <th>10</th>
      <td>eat</td>
      <td>afternoon tea</td>
      <td>sketch london</td>
      <td>51.512746</td>
      <td>-0.141553</td>
      <td>9 Conduit St Mayfair</td>
      <td>London W1S 2XG</td>
      <td>NaN</td>
      <td>0</td>
    </tr>
    <tr>
      <th>11</th>
      <td>see</td>
      <td>Street art</td>
      <td>graffiti workshop in Shoreditchâ€™s area</td>
      <td>51.528490</td>
      <td>-0.084728</td>
      <td>83 Rivington St Hackney</td>
      <td>London EC2A 3AY</td>
      <td>NaN</td>
      <td>2</td>
    </tr>
    <tr>
      <th>12</th>
      <td>eat</td>
      <td>street Feast</td>
      <td>Giant Robot</td>
      <td>51.506042</td>
      <td>-0.017343</td>
      <td>Crossrail Pl</td>
      <td>London E14 5AR</td>
      <td>NaN</td>
      <td>1</td>
    </tr>
    <tr>
      <th>13</th>
      <td>eat</td>
      <td>street Feast</td>
      <td>Dinerama</td>
      <td>51.523385</td>
      <td>-0.078889</td>
      <td>19 Great Eastern St Hackney</td>
      <td>London EC2A 3EJ</td>
      <td>NaN</td>
      <td>2</td>
    </tr>
    <tr>
      <th>14</th>
      <td>eat</td>
      <td>street Feast</td>
      <td>Hawker House</td>
      <td>51.497639</td>
      <td>-0.043885</td>
      <td>Canada St Rotherhithe</td>
      <td>London SE16 7PJ</td>
      <td>NaN</td>
      <td>1</td>
    </tr>
    <tr>
      <th>15</th>
      <td>see</td>
      <td>flower market</td>
      <td>Columbia Road</td>
      <td>51.528436</td>
      <td>-0.071442</td>
      <td>Columbia Rd</td>
      <td>London E2 7RG</td>
      <td>NaN</td>
      <td>2</td>
    </tr>
    <tr>
      <th>16</th>
      <td>see</td>
      <td>interactive movie theatre</td>
      <td>Prince Charles cinema\</td>
      <td>51.511488</td>
      <td>-0.130321</td>
      <td>7 Leicester Pl</td>
      <td>London WC2H 7BY</td>
      <td>NaN</td>
      <td>0</td>
    </tr>
    <tr>
      <th>17</th>
      <td>see</td>
      <td>theatre</td>
      <td>Palace Theatre London - Harry Potter and the C...</td>
      <td>51.513146</td>
      <td>-0.129807</td>
      <td>113 Shaftesbury Ave Soho</td>
      <td>London W1D 5AY</td>
      <td>NaN</td>
      <td>0</td>
    </tr>
    <tr>
      <th>18</th>
      <td>visit</td>
      <td>National Trust</td>
      <td>George Inn</td>
      <td>51.504190</td>
      <td>-0.090026</td>
      <td>75-77 Borough High St</td>
      <td>London SE1 1NH</td>
      <td>NaN</td>
      <td>2</td>
    </tr>
    <tr>
      <th>19</th>
      <td>see</td>
      <td>selfie</td>
      <td>The Selfie factory</td>
      <td>51.527253</td>
      <td>-0.088755</td>
      <td>160 City Rd</td>
      <td>London EC1V 2NX</td>
      <td>NaN</td>
      <td>2</td>
    </tr>
    <tr>
      <th>20</th>
      <td>shop</td>
      <td>suit</td>
      <td>suit supply</td>
      <td>51.510140</td>
      <td>-0.139289</td>
      <td>9 Vigo St Mayfair</td>
      <td>London W1S 3HH</td>
      <td>NaN</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div>




```python
for point in range(0, len(locationlist)):
    folium.Marker(locationlist[point],
                  icon= folium.Icon(color=coloration_cluster[df.iloc[point]['cluster']]),
                  popup=df['name'][point]).add_to(map)
```

    /home/tom/source/toucan/env/lib/python3.6/site-packages/ipykernel_launcher.py:3: UserWarning: color argument of Icon should be one of: {'darkpurple', 'darkgreen', 'lightblue', 'black', 'darkblue', 'purple', 'white', 'lightred', 'beige', 'cadetblue', 'green', 'darkred', 'lightgreen', 'blue', 'pink', 'orange', 'gray', 'lightgray', 'red'}.
      This is separate from the ipykernel package so we can avoid doing imports until



```python
map
```




<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><iframe src="data:text/html;charset=utf-8;base64,PCFET0NUWVBFIGh0bWw+CjxoZWFkPiAgICAKICAgIDxtZXRhIGh0dHAtZXF1aXY9ImNvbnRlbnQtdHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04IiAvPgogICAgCiAgICAgICAgPHNjcmlwdD4KICAgICAgICAgICAgTF9OT19UT1VDSCA9IGZhbHNlOwogICAgICAgICAgICBMX0RJU0FCTEVfM0QgPSBmYWxzZTsKICAgICAgICA8L3NjcmlwdD4KICAgIAogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vbGVhZmxldEAxLjUuMS9kaXN0L2xlYWZsZXQuanMiPjwvc2NyaXB0PgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY29kZS5qcXVlcnkuY29tL2pxdWVyeS0xLjEyLjQubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9qcy9ib290c3RyYXAubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5qcyI+PC9zY3JpcHQ+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vbGVhZmxldEAxLjUuMS9kaXN0L2xlYWZsZXQuY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vYm9vdHN0cmFwLzMuMi4wL2Nzcy9ib290c3RyYXAubWluLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLXRoZW1lLm1pbi5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9mb250LWF3ZXNvbWUvNC42LjMvY3NzL2ZvbnQtYXdlc29tZS5taW4uY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL0xlYWZsZXQuYXdlc29tZS1tYXJrZXJzLzIuMC4yL2xlYWZsZXQuYXdlc29tZS1tYXJrZXJzLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3Jhd2Nkbi5naXRoYWNrLmNvbS9weXRob24tdmlzdWFsaXphdGlvbi9mb2xpdW0vbWFzdGVyL2ZvbGl1bS90ZW1wbGF0ZXMvbGVhZmxldC5hd2Vzb21lLnJvdGF0ZS5jc3MiLz4KICAgIDxzdHlsZT5odG1sLCBib2R5IHt3aWR0aDogMTAwJTtoZWlnaHQ6IDEwMCU7bWFyZ2luOiAwO3BhZGRpbmc6IDA7fTwvc3R5bGU+CiAgICA8c3R5bGU+I21hcCB7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7Ym90dG9tOjA7cmlnaHQ6MDtsZWZ0OjA7fTwvc3R5bGU+CiAgICAKICAgICAgICAgICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwKICAgICAgICAgICAgICAgIGluaXRpYWwtc2NhbGU9MS4wLCBtYXhpbXVtLXNjYWxlPTEuMCwgdXNlci1zY2FsYWJsZT1ubyIgLz4KICAgICAgICAgICAgPHN0eWxlPgogICAgICAgICAgICAgICAgI21hcF9hYTU5YTY0NDk5OWY0OWI4YjM1Y2Q3OWNkZGUyMDE3NCB7CiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAuMCU7CiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAuMCU7CiAgICAgICAgICAgICAgICAgICAgbGVmdDogMC4wJTsKICAgICAgICAgICAgICAgICAgICB0b3A6IDAuMCU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgCjwvaGVhZD4KPGJvZHk+ICAgIAogICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvbGl1bS1tYXAiIGlkPSJtYXBfYWE1OWE2NDQ5OTlmNDliOGIzNWNkNzljZGRlMjAxNzQiID48L2Rpdj4KICAgICAgICAKPC9ib2R5Pgo8c2NyaXB0PiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0ID0gTC5tYXAoCiAgICAgICAgICAgICAgICAibWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0IiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBjZW50ZXI6IFs1MS41MSwgLTAuMV0sCiAgICAgICAgICAgICAgICAgICAgY3JzOiBMLkNSUy5FUFNHMzg1NywKICAgICAgICAgICAgICAgICAgICB6b29tOiAxMiwKICAgICAgICAgICAgICAgICAgICB6b29tQ29udHJvbDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBwcmVmZXJDYW52YXM6IGZhbHNlLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwoKICAgICAgICAgICAgCgogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciB0aWxlX2xheWVyXzk5Mzg1ZjhkNGVmMDQ4NTU5ZjdlZmFjNjRlNmQxMmI3ID0gTC50aWxlTGF5ZXIoCiAgICAgICAgICAgICAgICAiaHR0cHM6Ly9zdGFtZW4tdGlsZXMte3N9LmEuc3NsLmZhc3RseS5uZXQvdG9uZXIve3p9L3t4fS97eX0ucG5nIiwKICAgICAgICAgICAgICAgIHsiYXR0cmlidXRpb24iOiAiTWFwIHRpbGVzIGJ5IFx1MDAzY2EgaHJlZj1cImh0dHA6Ly9zdGFtZW4uY29tXCJcdTAwM2VTdGFtZW4gRGVzaWduXHUwMDNjL2FcdTAwM2UsIHVuZGVyIFx1MDAzY2EgaHJlZj1cImh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LzMuMFwiXHUwMDNlQ0MgQlkgMy4wXHUwMDNjL2FcdTAwM2UuIERhdGEgYnkgXHUwMDI2Y29weTsgXHUwMDNjYSBocmVmPVwiaHR0cDovL29wZW5zdHJlZXRtYXAub3JnXCJcdTAwM2VPcGVuU3RyZWV0TWFwXHUwMDNjL2FcdTAwM2UsIHVuZGVyIFx1MDAzY2EgaHJlZj1cImh0dHA6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvY29weXJpZ2h0XCJcdTAwM2VPRGJMXHUwMDNjL2FcdTAwM2UuIiwgImRldGVjdFJldGluYSI6IGZhbHNlLCAibWF4TmF0aXZlWm9vbSI6IDE4LCAibWF4Wm9vbSI6IDE4LCAibWluWm9vbSI6IDAsICJub1dyYXAiOiBmYWxzZSwgIm9wYWNpdHkiOiAxLCAic3ViZG9tYWlucyI6ICJhYmMiLCAidG1zIjogZmFsc2V9CiAgICAgICAgICAgICkuYWRkVG8obWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyX2MzNmI5YmYyOGViNjQ0OTFhMDM0ZWEzODBjN2IyZjc4ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNTEyODMzLCAtMC4xMjc2OTVdLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWE1OWE2NDQ5OTlmNDliOGIzNWNkNzljZGRlMjAxNzQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uX2QxYTVkMjRmMmUyZDQ4MTE5N2QwNDViZDFkMzZlOWQ0ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJwaWN0dXJlIiwgImljb25Db2xvciI6ICJvcmFuZ2UiLCAibWFya2VyQ29sb3IiOiAib3JhbmdlIiwgInByZWZpeCI6ICJnbHlwaGljb24ifQogICAgICAgICAgICApOwogICAgICAgICAgICBtYXJrZXJfYzM2YjliZjI4ZWI2NDQ5MWEwMzRlYTM4MGM3YjJmNzguc2V0SWNvbihpY29uX2QxYTVkMjRmMmUyZDQ4MTE5N2QwNDViZDFkMzZlOWQ0KTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF8yMjdjY2QyOGMxZTE0ZWVmOTllN2Q0YzUzZDExNzM0ZiA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfY2Q0NGY3ZTUxMGQ5NDIxMWE0Y2RjNjYxMDYyZjc2MTcgPSAkKGA8ZGl2IGlkPSJodG1sX2NkNDRmN2U1MTBkOTQyMTFhNGNkYzY2MTA2MmY3NjE3IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij50aGUgbW91c2V0cmFwPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzIyN2NjZDI4YzFlMTRlZWY5OWU3ZDRjNTNkMTE3MzRmLnNldENvbnRlbnQoaHRtbF9jZDQ0ZjdlNTEwZDk0MjExYTRjZGM2NjEwNjJmNzYxNyk7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl9jMzZiOWJmMjhlYjY0NDkxYTAzNGVhMzgwYzdiMmY3OC5iaW5kUG9wdXAocG9wdXBfMjI3Y2NkMjhjMWUxNGVlZjk5ZTdkNGM1M2QxMTczNGYpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfNzRkZWJjY2VkZTAzNDJhM2I3MDE4OWNjNWUxMGU2ODIgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFs1MS41MTE5OTg5OTk5OTk5OTYsIC0wLjEyMjc2NTAwMDAwMDAwMDAxXSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgaWNvbl83NmE5OWIyMWQ5NWI0NjUxYmE1M2Q1MGJiMTVkZTdkOCA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbigKICAgICAgICAgICAgICAgIHsiZXh0cmFDbGFzc2VzIjogImZhLXJvdGF0ZS0wIiwgImljb24iOiAiY2FtZXJhIiwgImljb25Db2xvciI6ICJiZWlnZSIsICJtYXJrZXJDb2xvciI6ICJvcmFuZ2UiLCAicHJlZml4IjogImdseXBoaWNvbiJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl83NGRlYmNjZWRlMDM0MmEzYjcwMTg5Y2M1ZTEwZTY4Mi5zZXRJY29uKGljb25fNzZhOTliMjFkOTViNDY1MWJhNTNkNTBiYjE1ZGU3ZDgpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzQyMmYwMDY2ZWRkNTRhYThiODVlZmRjZTQwZTI2ZTRkID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF9kMGEwMzg3N2YxMTI0NGZiOGI4M2I4NjQyNDJkYjgwNyA9ICQoYDxkaXYgaWQ9Imh0bWxfZDBhMDM4NzdmMTEyNDRmYjhiODNiODY0MjQyZGI4MDciIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNvdmVudCBHYXJkZW4gTWFya2V0PC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzQyMmYwMDY2ZWRkNTRhYThiODVlZmRjZTQwZTI2ZTRkLnNldENvbnRlbnQoaHRtbF9kMGEwMzg3N2YxMTI0NGZiOGI4M2I4NjQyNDJkYjgwNyk7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl83NGRlYmNjZWRlMDM0MmEzYjcwMTg5Y2M1ZTEwZTY4Mi5iaW5kUG9wdXAocG9wdXBfNDIyZjAwNjZlZGQ1NGFhOGI4NWVmZGNlNDBlMjZlNGQpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfYjYwN2MzMmIwZDA0NGE3MzllZDVjOTZjYzE5YzhmYjAgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFs1MS40OTkyOTIsIC0wLjEyNzMwOTk5OTk5OTk5OTk4XSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgaWNvbl82NmNmYjY3OWQxZjM0MzU2OWI2MGNiMjFmMWM1NTcyYSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbigKICAgICAgICAgICAgICAgIHsiZXh0cmFDbGFzc2VzIjogImZhLXJvdGF0ZS0wIiwgImljb24iOiAiY2FtZXJhIiwgImljb25Db2xvciI6ICJiZWlnZSIsICJtYXJrZXJDb2xvciI6ICJvcmFuZ2UiLCAicHJlZml4IjogImdseXBoaWNvbiJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl9iNjA3YzMyYjBkMDQ0YTczOWVkNWM5NmNjMTljOGZiMC5zZXRJY29uKGljb25fNjZjZmI2NzlkMWYzNDM1NjliNjBjYjIxZjFjNTU3MmEpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwX2Y5M2UzMzcyMzQ3NzQ3OWM4NDlhOTZjZTIzYzUxZWM3ID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF85MDVhMmM0YTJiYzQ0YTAxODljM2E0MmI1ZTgwN2RjNyA9ICQoYDxkaXYgaWQ9Imh0bWxfOTA1YTJjNGEyYmM0NGEwMTg5YzNhNDJiNWU4MDdkYzciIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkFiYmF5ZSBkZSBXZXN0bWluc3RlcjwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9mOTNlMzM3MjM0Nzc0NzljODQ5YTk2Y2UyM2M1MWVjNy5zZXRDb250ZW50KGh0bWxfOTA1YTJjNGEyYmM0NGEwMTg5YzNhNDJiNWU4MDdkYzcpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfYjYwN2MzMmIwZDA0NGE3MzllZDVjOTZjYzE5YzhmYjAuYmluZFBvcHVwKHBvcHVwX2Y5M2UzMzcyMzQ3NzQ3OWM4NDlhOTZjZTIzYzUxZWM3KQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyXzViYmQ0ZjQ0ZWUyYTRlOThiZDQ4MDczOWVjMDUzOWJkID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNTExMiwgLTAuMDgzNTQwOTk5OTk5OTk5OTldLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWE1OWE2NDQ5OTlmNDliOGIzNWNkNzljZGRlMjAxNzQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uX2ZmZTE1MDJmNzM3YTQwMmZhNjFhZmFkZDE2MGQ1YzRhID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJwaWN0dXJlIiwgImljb25Db2xvciI6ICJvcmFuZ2UiLCAibWFya2VyQ29sb3IiOiAibGlnaHRncmVlbiIsICJwcmVmaXgiOiAiZ2x5cGhpY29uIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyXzViYmQ0ZjQ0ZWUyYTRlOThiZDQ4MDczOWVjMDUzOWJkLnNldEljb24oaWNvbl9mZmUxNTAyZjczN2E0MDJmYTYxYWZhZGQxNjBkNWM0YSk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfY2NmN2VjZDhhZDIwNGNkZDljOTA1ZTNmMWU4OWJhZmUgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzdlM2EzN2JmYjM1MDQzZTg4NDUxYWQ5YTljMTkyNGVkID0gJChgPGRpdiBpZD0iaHRtbF83ZTNhMzdiZmIzNTA0M2U4ODQ1MWFkOWE5YzE5MjRlZCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+U2t5IEdhcmRlbjwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9jY2Y3ZWNkOGFkMjA0Y2RkOWM5MDVlM2YxZTg5YmFmZS5zZXRDb250ZW50KGh0bWxfN2UzYTM3YmZiMzUwNDNlODg0NTFhZDlhOWMxOTI0ZWQpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfNWJiZDRmNDRlZTJhNGU5OGJkNDgwNzM5ZWMwNTM5YmQuYmluZFBvcHVwKHBvcHVwX2NjZjdlY2Q4YWQyMDRjZGQ5YzkwNWUzZjFlODliYWZlKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyX2NmODY0MjBiMWI4OTRjOTFiZGQzZjExZDY0MWQyNzYwID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNTUxNzA0LCAtMC4xNTg4MjZdLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWE1OWE2NDQ5OTlmNDliOGIzNWNkNzljZGRlMjAxNzQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uXzJmZGUyMWViNjE5YTRiZGNhZmZmZDcwOTAyMjZhYmIwID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJjYW1lcmEiLCAiaWNvbkNvbG9yIjogImJlaWdlIiwgIm1hcmtlckNvbG9yIjogIm9yYW5nZSIsICJwcmVmaXgiOiAiZ2x5cGhpY29uIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyX2NmODY0MjBiMWI4OTRjOTFiZGQzZjExZDY0MWQyNzYwLnNldEljb24oaWNvbl8yZmRlMjFlYjYxOWE0YmRjYWZmZmQ3MDkwMjI2YWJiMCk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfNTJkNzkzOGZlZTBkNDU2YmJlZjllN2RjOTc5NDY5MmUgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzExYmRkNDdmMzdjNTQ4NWZiMTQ1YzUyOWRmZmUxNGRmID0gJChgPGRpdiBpZD0iaHRtbF8xMWJkZDQ3ZjM3YzU0ODVmYjE0NWM1MjlkZmZlMTRkZiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2FtZGVuIE1hcmtldDwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF81MmQ3OTM4ZmVlMGQ0NTZiYmVmOWU3ZGM5Nzk0NjkyZS5zZXRDb250ZW50KGh0bWxfMTFiZGQ0N2YzN2M1NDg1ZmIxNDVjNTI5ZGZmZTE0ZGYpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfY2Y4NjQyMGIxYjg5NGM5MWJkZDNmMTFkNjQxZDI3NjAuYmluZFBvcHVwKHBvcHVwXzUyZDc5MzhmZWUwZDQ1NmJiZWY5ZTdkYzk3OTQ2OTJlKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyX2I2NDk1ODQ5NTFmZjRiYjJhYTJlZTlmZTgzYzI0MTFjID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNTA1NDQsIC0wLjA5MTA2MV0sCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApLmFkZFRvKG1hcF9hYTU5YTY0NDk5OWY0OWI4YjM1Y2Q3OWNkZGUyMDE3NCk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGljb25fN2RhYzMxMWQzMjRhNGRjNzgzYzBmMDI5YmY4YzUzNWMgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oCiAgICAgICAgICAgICAgICB7ImV4dHJhQ2xhc3NlcyI6ICJmYS1yb3RhdGUtMCIsICJpY29uIjogImN1dGxlcnkiLCAiaWNvbkNvbG9yIjogImxpbWVncmVlbiIsICJtYXJrZXJDb2xvciI6ICJsaWdodGdyZWVuIiwgInByZWZpeCI6ICJnbHlwaGljb24ifQogICAgICAgICAgICApOwogICAgICAgICAgICBtYXJrZXJfYjY0OTU4NDk1MWZmNGJiMmFhMmVlOWZlODNjMjQxMWMuc2V0SWNvbihpY29uXzdkYWMzMTFkMzI0YTRkYzc4M2MwZjAyOWJmOGM1MzVjKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF9kYmYzMGRhZTQwNjA0YjNlYWQzYTQ4M2YwYzc4NWE0MiA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfNTA5MzA4YTFlMTZmNGIwMGIzYTdkMmExMWIxMTg2YWQgPSAkKGA8ZGl2IGlkPSJodG1sXzUwOTMwOGExZTE2ZjRiMDBiM2E3ZDJhMTFiMTE4NmFkIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Cb3JvdWdoIE1hcmtldDwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9kYmYzMGRhZTQwNjA0YjNlYWQzYTQ4M2YwYzc4NWE0Mi5zZXRDb250ZW50KGh0bWxfNTA5MzA4YTFlMTZmNGIwMGIzYTdkMmExMWIxMTg2YWQpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfYjY0OTU4NDk1MWZmNGJiMmFhMmVlOWZlODNjMjQxMWMuYmluZFBvcHVwKHBvcHVwX2RiZjMwZGFlNDA2MDRiM2VhZDNhNDgzZjBjNzg1YTQyKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyXzNmMDdhMTM4MDcyZjQ1OGVhMmY2NDI4MWJkYzVhYzkxID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNTA1ODM3LCAtMC4xODc3MjRdLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWE1OWE2NDQ5OTlmNDliOGIzNWNkNzljZGRlMjAxNzQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uX2RkNzViYjg1NGM3ZDQzMGQ5ZGJlNzZiMmJhNDQ5OWRjID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJjdXRsZXJ5IiwgImljb25Db2xvciI6ICJsaW1lZ3JlZW4iLCAibWFya2VyQ29sb3IiOiAibGltZWdyZWVuIiwgInByZWZpeCI6ICJnbHlwaGljb24ifQogICAgICAgICAgICApOwogICAgICAgICAgICBtYXJrZXJfM2YwN2ExMzgwNzJmNDU4ZWEyZjY0MjgxYmRjNWFjOTEuc2V0SWNvbihpY29uX2RkNzViYjg1NGM3ZDQzMGQ5ZGJlNzZiMmJhNDQ5OWRjKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF9kMGI0ZDlhOGVhNmI0ZjhhYmFmZTQ3ZGMwN2JlNzM1ZiA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfODkzNmRiZGY4ZWY3NDMwZWIyM2QxMjFiYjhjODAzODIgPSAkKGA8ZGl2IGlkPSJodG1sXzg5MzZkYmRmOGVmNzQzMGViMjNkMTIxYmI4YzgwMzgyIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij50aGUgT3Jhbmdlcnk8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfZDBiNGQ5YThlYTZiNGY4YWJhZmU0N2RjMDdiZTczNWYuc2V0Q29udGVudChodG1sXzg5MzZkYmRmOGVmNzQzMGViMjNkMTIxYmI4YzgwMzgyKTsKICAgICAgICAKCiAgICAgICAgbWFya2VyXzNmMDdhMTM4MDcyZjQ1OGVhMmY2NDI4MWJkYzVhYzkxLmJpbmRQb3B1cChwb3B1cF9kMGI0ZDlhOGVhNmI0ZjhhYmFmZTQ3ZGMwN2JlNzM1ZikKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIG1hcmtlcl84ZWZhZDVkMzg3NDg0MDFlOTk3OTU3MDlhODAxMDAxYiA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzUxLjUxMTQ5NCwgLTAuMTIwMDk4Ml0sCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApLmFkZFRvKG1hcF9hYTU5YTY0NDk5OWY0OWI4YjM1Y2Q3OWNkZGUyMDE3NCk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGljb25fODRhYzVjMDNiMGRhNDc1MDg0ZGY3ODY2YzFkZmIxZTggPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oCiAgICAgICAgICAgICAgICB7ImV4dHJhQ2xhc3NlcyI6ICJmYS1yb3RhdGUtMCIsICJpY29uIjogInBpY3R1cmUiLCAiaWNvbkNvbG9yIjogIm9yYW5nZSIsICJtYXJrZXJDb2xvciI6ICJvcmFuZ2UiLCAicHJlZml4IjogImdseXBoaWNvbiJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl84ZWZhZDVkMzg3NDg0MDFlOTk3OTU3MDlhODAxMDAxYi5zZXRJY29uKGljb25fODRhYzVjMDNiMGRhNDc1MDg0ZGY3ODY2YzFkZmIxZTgpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzA3YTEyZmRhNWMzOTRlNzdhZDZlNDliZTZiNTdlODFmID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF9hOTNmOGMzZmE4NTc0Y2YwODQ2NmUwMTExMTk3ZmFkMCA9ICQoYDxkaXYgaWQ9Imh0bWxfYTkzZjhjM2ZhODU3NGNmMDg0NjZlMDExMTE5N2ZhZDAiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPktpbmcgTGlvbjwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF8wN2ExMmZkYTVjMzk0ZTc3YWQ2ZTQ5YmU2YjU3ZTgxZi5zZXRDb250ZW50KGh0bWxfYTkzZjhjM2ZhODU3NGNmMDg0NjZlMDExMTE5N2ZhZDApOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfOGVmYWQ1ZDM4NzQ4NDAxZTk5Nzk1NzA5YTgwMTAwMWIuYmluZFBvcHVwKHBvcHVwXzA3YTEyZmRhNWMzOTRlNzdhZDZlNDliZTZiNTdlODFmKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyX2NiY2QyMDJlYzg0ZDRhMjJiZjc5OTAwODBkYTM5ZjdhID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNDcwNjUyLCAtMC4wNjgyODMwMDAwMDAwMDAwMV0sCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApLmFkZFRvKG1hcF9hYTU5YTY0NDk5OWY0OWI4YjM1Y2Q3OWNkZGUyMDE3NCk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGljb25fZDU4MzFhMGI1NDhmNDZmNTkxYzk4MzZkOTI5ZjMwMTggPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oCiAgICAgICAgICAgICAgICB7ImV4dHJhQ2xhc3NlcyI6ICJmYS1yb3RhdGUtMCIsICJpY29uIjogImdsYXNzIiwgImljb25Db2xvciI6ICJkYXJrZ3JlZW4iLCAibWFya2VyQ29sb3IiOiAiYmVpZ2UiLCAicHJlZml4IjogImdseXBoaWNvbiJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl9jYmNkMjAyZWM4NGQ0YTIyYmY3OTkwMDgwZGEzOWY3YS5zZXRJY29uKGljb25fZDU4MzFhMGI1NDhmNDZmNTkxYzk4MzZkOTI5ZjMwMTgpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzU5NmMwNDgyN2IwZTRjNWRhZjkyYzkwMmIxODQxY2Q1ID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF9hZWVhMzA2NjIyODg0ZTU5ODQxYjhmNzI1ZjBkMzY3NCA9ICQoYDxkaXYgaWQ9Imh0bWxfYWVlYTMwNjYyMjg4NGU1OTg0MWI4ZjcyNWYwZDM2NzQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkZyYW5rcyBDYWZlPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzU5NmMwNDgyN2IwZTRjNWRhZjkyYzkwMmIxODQxY2Q1LnNldENvbnRlbnQoaHRtbF9hZWVhMzA2NjIyODg0ZTU5ODQxYjhmNzI1ZjBkMzY3NCk7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl9jYmNkMjAyZWM4NGQ0YTIyYmY3OTkwMDgwZGEzOWY3YS5iaW5kUG9wdXAocG9wdXBfNTk2YzA0ODI3YjBlNGM1ZGFmOTJjOTAyYjE4NDFjZDUpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfMWE1Y2E2NjBlZGJjNGEwOWI1NDIxOWM4NDA0NDQ4ZmQgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFs1MS40OTAwNTYsIC0wLjE5MTExOV0sCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApLmFkZFRvKG1hcF9hYTU5YTY0NDk5OWY0OWI4YjM1Y2Q3OWNkZGUyMDE3NCk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGljb25fYjFiMzhhOWQ4ZTU2NDY3MDgwZjc2NGI3YmRkNGYwMDIgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oCiAgICAgICAgICAgICAgICB7ImV4dHJhQ2xhc3NlcyI6ICJmYS1yb3RhdGUtMCIsICJpY29uIjogImdsYXNzIiwgImljb25Db2xvciI6ICJkYXJrZ3JlZW4iLCAibWFya2VyQ29sb3IiOiAibGltZWdyZWVuIiwgInByZWZpeCI6ICJnbHlwaGljb24ifQogICAgICAgICAgICApOwogICAgICAgICAgICBtYXJrZXJfMWE1Y2E2NjBlZGJjNGEwOWI1NDIxOWM4NDA0NDQ4ZmQuc2V0SWNvbihpY29uX2IxYjM4YTlkOGU1NjQ2NzA4MGY3NjRiN2JkZDRmMDAyKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF9kYTBjNjg4OWRhNmQ0MjI2OTUxZWYzNDk1MjA0ZDQzZiA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfY2Q2YzI0NGEyODJlNDNhMzhhZWY4MzY0MzFlNzNkZmEgPSAkKGA8ZGl2IGlkPSJodG1sX2NkNmMyNDRhMjgyZTQzYTM4YWVmODM2NDMxZTczZGZhIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5ldmFucyBhbmQgcGVlbCBkZXRlY3RpdmUgYWdlbmN5PC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwX2RhMGM2ODg5ZGE2ZDQyMjY5NTFlZjM0OTUyMDRkNDNmLnNldENvbnRlbnQoaHRtbF9jZDZjMjQ0YTI4MmU0M2EzOGFlZjgzNjQzMWU3M2RmYSk7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl8xYTVjYTY2MGVkYmM0YTA5YjU0MjE5Yzg0MDQ0NDhmZC5iaW5kUG9wdXAocG9wdXBfZGEwYzY4ODlkYTZkNDIyNjk1MWVmMzQ5NTIwNGQ0M2YpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfODEzZTY1YTE2Mzk2NGRkNjlhNzU1ZDUyMTYzMTQ1MjYgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFs1MS41MTI3NDYsIC0wLjE0MTU1Mjk5OTk5OTk5OTk4XSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgaWNvbl80MDFiZDQyMzVmYjU0YzMxOTRjMDc2ZDU0ZmExOTQxMCA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbigKICAgICAgICAgICAgICAgIHsiZXh0cmFDbGFzc2VzIjogImZhLXJvdGF0ZS0wIiwgImljb24iOiAiY3V0bGVyeSIsICJpY29uQ29sb3IiOiAibGltZWdyZWVuIiwgIm1hcmtlckNvbG9yIjogIm9yYW5nZSIsICJwcmVmaXgiOiAiZ2x5cGhpY29uIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyXzgxM2U2NWExNjM5NjRkZDY5YTc1NWQ1MjE2MzE0NTI2LnNldEljb24oaWNvbl80MDFiZDQyMzVmYjU0YzMxOTRjMDc2ZDU0ZmExOTQxMCk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfMmVjNjllODNkY2FkNGU1NWE2ZTAwZGJjNzU1OGFmOGMgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzU0ODY4YzBmNDc4YTQyMTI5NWFkOTU0NDViNTA1YzVhID0gJChgPGRpdiBpZD0iaHRtbF81NDg2OGMwZjQ3OGE0MjEyOTVhZDk1NDQ1YjUwNWM1YSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+c2tldGNoIGxvbmRvbjwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF8yZWM2OWU4M2RjYWQ0ZTU1YTZlMDBkYmM3NTU4YWY4Yy5zZXRDb250ZW50KGh0bWxfNTQ4NjhjMGY0NzhhNDIxMjk1YWQ5NTQ0NWI1MDVjNWEpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfODEzZTY1YTE2Mzk2NGRkNjlhNzU1ZDUyMTYzMTQ1MjYuYmluZFBvcHVwKHBvcHVwXzJlYzY5ZTgzZGNhZDRlNTVhNmUwMGRiYzc1NThhZjhjKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyX2E2NmRiNTI4YzI0NzQ0ZWJhNWIxN2M2NDZlN2EzYjEzID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNTI4NDkwMDAwMDAwMDA1LCAtMC4wODQ3MjhdLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWE1OWE2NDQ5OTlmNDliOGIzNWNkNzljZGRlMjAxNzQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uX2IxMDA5OTk1ZDJlNzRhOWNhYzQ3MmEzMzMyZDA3MmFhID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJwaWN0dXJlIiwgImljb25Db2xvciI6ICJvcmFuZ2UiLCAibWFya2VyQ29sb3IiOiAibGlnaHRncmVlbiIsICJwcmVmaXgiOiAiZ2x5cGhpY29uIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyX2E2NmRiNTI4YzI0NzQ0ZWJhNWIxN2M2NDZlN2EzYjEzLnNldEljb24oaWNvbl9iMTAwOTk5NWQyZTc0YTljYWM0NzJhMzMzMmQwNzJhYSk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfZTI5MGYyOWZmY2M3NGIwNzljYjY0OWNlZjNmMGIzMTAgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzFhNmU2OGI3NTg3ZjQ4M2FiOThmMzQ0YzBmMTQyNjcxID0gJChgPGRpdiBpZD0iaHRtbF8xYTZlNjhiNzU4N2Y0ODNhYjk4ZjM0NGMwZjE0MjY3MSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Z3JhZmZpdGkgd29ya3Nob3AgaW4gU2hvcmVkaXRjaOKAmXMgYXJlYTwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9lMjkwZjI5ZmZjYzc0YjA3OWNiNjQ5Y2VmM2YwYjMxMC5zZXRDb250ZW50KGh0bWxfMWE2ZTY4Yjc1ODdmNDgzYWI5OGYzNDRjMGYxNDI2NzEpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfYTY2ZGI1MjhjMjQ3NDRlYmE1YjE3YzY0NmU3YTNiMTMuYmluZFBvcHVwKHBvcHVwX2UyOTBmMjlmZmNjNzRiMDc5Y2I2NDljZWYzZjBiMzEwKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyXzZhOTgwM2M1MDk1YTRmNjFiZmUwOGE2N2JhOGVhOTA2ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNTA2MDQyMSwgLTAuMDE3MzQyNzAwMDAwMDAwMDAzXSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgaWNvbl80NzIxMTE2OWYwMzE0MmIzYmJmMGJmODE5NjY3NjRiNCA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbigKICAgICAgICAgICAgICAgIHsiZXh0cmFDbGFzc2VzIjogImZhLXJvdGF0ZS0wIiwgImljb24iOiAiY3V0bGVyeSIsICJpY29uQ29sb3IiOiAibGltZWdyZWVuIiwgIm1hcmtlckNvbG9yIjogImJlaWdlIiwgInByZWZpeCI6ICJnbHlwaGljb24ifQogICAgICAgICAgICApOwogICAgICAgICAgICBtYXJrZXJfNmE5ODAzYzUwOTVhNGY2MWJmZTA4YTY3YmE4ZWE5MDYuc2V0SWNvbihpY29uXzQ3MjExMTY5ZjAzMTQyYjNiYmYwYmY4MTk2Njc2NGI0KTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF9hMGNjZmRiNTI1NDM0Nzg2YWU2MjNkNjQ5MTMxZTkxMCA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfNjdiNWY3NzEyYTQ0NDU1YWI4YzhhYzI2MDY0YTc5ZjIgPSAkKGA8ZGl2IGlkPSJodG1sXzY3YjVmNzcxMmE0NDQ1NWFiOGM4YWMyNjA2NGE3OWYyIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5HaWFudCBSb2JvdDwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9hMGNjZmRiNTI1NDM0Nzg2YWU2MjNkNjQ5MTMxZTkxMC5zZXRDb250ZW50KGh0bWxfNjdiNWY3NzEyYTQ0NDU1YWI4YzhhYzI2MDY0YTc5ZjIpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfNmE5ODAzYzUwOTVhNGY2MWJmZTA4YTY3YmE4ZWE5MDYuYmluZFBvcHVwKHBvcHVwX2EwY2NmZGI1MjU0MzQ3ODZhZTYyM2Q2NDkxMzFlOTEwKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyXzNlMWVkOTJhYzY0MDRlNjM4MTExZjY4MjRjNTBkYjUxID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNTIzMzg1LCAtMC4wNzg4ODldLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWE1OWE2NDQ5OTlmNDliOGIzNWNkNzljZGRlMjAxNzQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uX2JmZWU1NzZhZDQ4MzQ2ZTA5OGJiYzI5NWVmM2U5ODBlID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJjdXRsZXJ5IiwgImljb25Db2xvciI6ICJsaW1lZ3JlZW4iLCAibWFya2VyQ29sb3IiOiAibGlnaHRncmVlbiIsICJwcmVmaXgiOiAiZ2x5cGhpY29uIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyXzNlMWVkOTJhYzY0MDRlNjM4MTExZjY4MjRjNTBkYjUxLnNldEljb24oaWNvbl9iZmVlNTc2YWQ0ODM0NmUwOThiYmMyOTVlZjNlOTgwZSk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfMmZjZGExYTMzN2Y2NDM0OTk4YjE0MzA0NDlmZTNlZjAgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzkxNTA4ZTQxNzc2MDRlZTliNzFkMzhjY2JjMWZkOTQ0ID0gJChgPGRpdiBpZD0iaHRtbF85MTUwOGU0MTc3NjA0ZWU5YjcxZDM4Y2NiYzFmZDk0NCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RGluZXJhbWE8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfMmZjZGExYTMzN2Y2NDM0OTk4YjE0MzA0NDlmZTNlZjAuc2V0Q29udGVudChodG1sXzkxNTA4ZTQxNzc2MDRlZTliNzFkMzhjY2JjMWZkOTQ0KTsKICAgICAgICAKCiAgICAgICAgbWFya2VyXzNlMWVkOTJhYzY0MDRlNjM4MTExZjY4MjRjNTBkYjUxLmJpbmRQb3B1cChwb3B1cF8yZmNkYTFhMzM3ZjY0MzQ5OThiMTQzMDQ0OWZlM2VmMCkKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIG1hcmtlcl9kNTA4ZGExMDc4ZWY0MzBkYjg0YTExYWFlNzIwNzE0OSA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzUxLjQ5NzYzOTQsIC0wLjA0Mzg4NTNdLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWE1OWE2NDQ5OTlmNDliOGIzNWNkNzljZGRlMjAxNzQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uXzY1NDRiZGVlOWQzNTQwYzc4YzkzYjQwMGQxYTMzY2Y1ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJjdXRsZXJ5IiwgImljb25Db2xvciI6ICJsaW1lZ3JlZW4iLCAibWFya2VyQ29sb3IiOiAiYmVpZ2UiLCAicHJlZml4IjogImdseXBoaWNvbiJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl9kNTA4ZGExMDc4ZWY0MzBkYjg0YTExYWFlNzIwNzE0OS5zZXRJY29uKGljb25fNjU0NGJkZWU5ZDM1NDBjNzhjOTNiNDAwZDFhMzNjZjUpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzg1Mzk1MTRlN2MzZDQ4NTY5NzA3NDhmZGEwNzM1N2Q4ID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF8xMTk1ZGZkZWU5YzQ0NTdlYmRlNGJiYTIwYTU5MTAxOSA9ICQoYDxkaXYgaWQ9Imh0bWxfMTE5NWRmZGVlOWM0NDU3ZWJkZTRiYmEyMGE1OTEwMTkiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkhhd2tlciBIb3VzZTwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF84NTM5NTE0ZTdjM2Q0ODU2OTcwNzQ4ZmRhMDczNTdkOC5zZXRDb250ZW50KGh0bWxfMTE5NWRmZGVlOWM0NDU3ZWJkZTRiYmEyMGE1OTEwMTkpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfZDUwOGRhMTA3OGVmNDMwZGI4NGExMWFhZTcyMDcxNDkuYmluZFBvcHVwKHBvcHVwXzg1Mzk1MTRlN2MzZDQ4NTY5NzA3NDhmZGEwNzM1N2Q4KQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyX2QwYWNlYTU0MTQ1ODQ2YTk4ZTkyMzlkMmFkOTlmMjI4ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNTI4NDM2LCAtMC4wNzE0NDE5OTk5OTk5OTk5OV0sCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApLmFkZFRvKG1hcF9hYTU5YTY0NDk5OWY0OWI4YjM1Y2Q3OWNkZGUyMDE3NCk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGljb25fZGUzYTY3ZDExMWZhNGNjNmIyZjQ5MDgwZTk3NTVjNjkgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oCiAgICAgICAgICAgICAgICB7ImV4dHJhQ2xhc3NlcyI6ICJmYS1yb3RhdGUtMCIsICJpY29uIjogInBpY3R1cmUiLCAiaWNvbkNvbG9yIjogIm9yYW5nZSIsICJtYXJrZXJDb2xvciI6ICJsaWdodGdyZWVuIiwgInByZWZpeCI6ICJnbHlwaGljb24ifQogICAgICAgICAgICApOwogICAgICAgICAgICBtYXJrZXJfZDBhY2VhNTQxNDU4NDZhOThlOTIzOWQyYWQ5OWYyMjguc2V0SWNvbihpY29uX2RlM2E2N2QxMTFmYTRjYzZiMmY0OTA4MGU5NzU1YzY5KTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF9hY2Q5ZDcxMDJjYmM0YWJiOGNlMzk0M2U3ZDMxNTRlMCA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfOTg1NGEzYTMzZjlmNDMyNmI1ZTIwMzMwOWIxODQ1ZjMgPSAkKGA8ZGl2IGlkPSJodG1sXzk4NTRhM2EzM2Y5ZjQzMjZiNWUyMDMzMDliMTg0NWYzIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Db2x1bWJpYSBSb2FkPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwX2FjZDlkNzEwMmNiYzRhYmI4Y2UzOTQzZTdkMzE1NGUwLnNldENvbnRlbnQoaHRtbF85ODU0YTNhMzNmOWY0MzI2YjVlMjAzMzA5YjE4NDVmMyk7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl9kMGFjZWE1NDE0NTg0NmE5OGU5MjM5ZDJhZDk5ZjIyOC5iaW5kUG9wdXAocG9wdXBfYWNkOWQ3MTAyY2JjNGFiYjhjZTM5NDNlN2QzMTU0ZTApCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfYTk0NDVjNjRjYmZhNDdjMThmZDc1MTUzYWU0OTY4ZjMgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFs1MS41MTE0ODgsIC0wLjEzMDMyMV0sCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApLmFkZFRvKG1hcF9hYTU5YTY0NDk5OWY0OWI4YjM1Y2Q3OWNkZGUyMDE3NCk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGljb25fNjc4OTMzYmEyMzI4NDNkNWE0ZjFlY2NiODJkMDA0NmYgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oCiAgICAgICAgICAgICAgICB7ImV4dHJhQ2xhc3NlcyI6ICJmYS1yb3RhdGUtMCIsICJpY29uIjogInBpY3R1cmUiLCAiaWNvbkNvbG9yIjogIm9yYW5nZSIsICJtYXJrZXJDb2xvciI6ICJvcmFuZ2UiLCAicHJlZml4IjogImdseXBoaWNvbiJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl9hOTQ0NWM2NGNiZmE0N2MxOGZkNzUxNTNhZTQ5NjhmMy5zZXRJY29uKGljb25fNjc4OTMzYmEyMzI4NDNkNWE0ZjFlY2NiODJkMDA0NmYpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwX2Q4NGVlY2ZmYTI0MTQyNzhiNGZlYzNmMDYwMzliMzA2ID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF85OTcwMTEyYmU0NWQ0YWNjYjdkZTU0ZDAwNjg5NzMwZiA9ICQoYDxkaXYgaWQ9Imh0bWxfOTk3MDExMmJlNDVkNGFjY2I3ZGU1NGQwMDY4OTczMGYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlByaW5jZSBDaGFybGVzIGNpbmVtYVw8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfZDg0ZWVjZmZhMjQxNDI3OGI0ZmVjM2YwNjAzOWIzMDYuc2V0Q29udGVudChodG1sXzk5NzAxMTJiZTQ1ZDRhY2NiN2RlNTRkMDA2ODk3MzBmKTsKICAgICAgICAKCiAgICAgICAgbWFya2VyX2E5NDQ1YzY0Y2JmYTQ3YzE4ZmQ3NTE1M2FlNDk2OGYzLmJpbmRQb3B1cChwb3B1cF9kODRlZWNmZmEyNDE0Mjc4YjRmZWMzZjA2MDM5YjMwNikKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIG1hcmtlcl9kN2I2OGZhMTA5OGI0YjViYTIwYWM1YWIyMDBmZTc5YiA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzUxLjUxMzE0NiwgLTAuMTI5ODA3XSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgaWNvbl81Yjk4ODBjODM3MzA0YWI1YTAyNjA3MTU5ZmU4YmNkOCA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbigKICAgICAgICAgICAgICAgIHsiZXh0cmFDbGFzc2VzIjogImZhLXJvdGF0ZS0wIiwgImljb24iOiAicGljdHVyZSIsICJpY29uQ29sb3IiOiAib3JhbmdlIiwgIm1hcmtlckNvbG9yIjogIm9yYW5nZSIsICJwcmVmaXgiOiAiZ2x5cGhpY29uIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyX2Q3YjY4ZmExMDk4YjRiNWJhMjBhYzVhYjIwMGZlNzliLnNldEljb24oaWNvbl81Yjk4ODBjODM3MzA0YWI1YTAyNjA3MTU5ZmU4YmNkOCk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfYTU4ODM4N2JlZWM2NDQyYjllNWMxODA5MmUyYmQyZjMgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzhkMWJmYzA0YTk2YzQwOWQ5Njk4NGYzYzE2ZjhkNDZhID0gJChgPGRpdiBpZD0iaHRtbF84ZDFiZmMwNGE5NmM0MDlkOTY5ODRmM2MxNmY4ZDQ2YSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UGFsYWNlIFRoZWF0cmUgTG9uZG9uIC0gSGFycnkgUG90dGVyIGFuZCB0aGUgQ3Vyc2VkIENoaWxkPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwX2E1ODgzODdiZWVjNjQ0MmI5ZTVjMTgwOTJlMmJkMmYzLnNldENvbnRlbnQoaHRtbF84ZDFiZmMwNGE5NmM0MDlkOTY5ODRmM2MxNmY4ZDQ2YSk7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl9kN2I2OGZhMTA5OGI0YjViYTIwYWM1YWIyMDBmZTc5Yi5iaW5kUG9wdXAocG9wdXBfYTU4ODM4N2JlZWM2NDQyYjllNWMxODA5MmUyYmQyZjMpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfNThhMzVhNjc2ZTI3NGQwODljNmJmNzI4YjQ3MzM4NGYgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFs1MS41MDQxOSwgLTAuMDkwMDI2XSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgaWNvbl9mNjA0YjhkZTBiODY0NzQ0OGVjODkxNDQwZWUyOGI4ZCA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbigKICAgICAgICAgICAgICAgIHsiZXh0cmFDbGFzc2VzIjogImZhLXJvdGF0ZS0wIiwgImljb24iOiAiY2FtZXJhIiwgImljb25Db2xvciI6ICJiZWlnZSIsICJtYXJrZXJDb2xvciI6ICJsaWdodGdyZWVuIiwgInByZWZpeCI6ICJnbHlwaGljb24ifQogICAgICAgICAgICApOwogICAgICAgICAgICBtYXJrZXJfNThhMzVhNjc2ZTI3NGQwODljNmJmNzI4YjQ3MzM4NGYuc2V0SWNvbihpY29uX2Y2MDRiOGRlMGI4NjQ3NDQ4ZWM4OTE0NDBlZTI4YjhkKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF9hMjIwM2Q4YTc1OTE0NzIxOWYyYWZjYTNjZjEzYjQ2ZiA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfOTA3MjBiNTdjMmYwNGJjNTgzMzIzMzU0ZjhhZGRmMmQgPSAkKGA8ZGl2IGlkPSJodG1sXzkwNzIwYjU3YzJmMDRiYzU4MzMyMzM1NGY4YWRkZjJkIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5HZW9yZ2UgSW5uPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwX2EyMjAzZDhhNzU5MTQ3MjE5ZjJhZmNhM2NmMTNiNDZmLnNldENvbnRlbnQoaHRtbF85MDcyMGI1N2MyZjA0YmM1ODMzMjMzNTRmOGFkZGYyZCk7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl81OGEzNWE2NzZlMjc0ZDA4OWM2YmY3MjhiNDczMzg0Zi5iaW5kUG9wdXAocG9wdXBfYTIyMDNkOGE3NTkxNDcyMTlmMmFmY2EzY2YxM2I0NmYpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfZTFiM2QzZTEyYjBhNDAxNTg0MDBmN2I3NjlkNTUyOGIgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFs1MS41MjcyNTI4LCAtMC4wODg3NTQ1XSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgaWNvbl80ZmMwYWJiOTg4YzM0MGFlYTA3MGM5YWMxYjJjOGExNCA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbigKICAgICAgICAgICAgICAgIHsiZXh0cmFDbGFzc2VzIjogImZhLXJvdGF0ZS0wIiwgImljb24iOiAicGljdHVyZSIsICJpY29uQ29sb3IiOiAib3JhbmdlIiwgIm1hcmtlckNvbG9yIjogImxpZ2h0Z3JlZW4iLCAicHJlZml4IjogImdseXBoaWNvbiJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl9lMWIzZDNlMTJiMGE0MDE1ODQwMGY3Yjc2OWQ1NTI4Yi5zZXRJY29uKGljb25fNGZjMGFiYjk4OGMzNDBhZWEwNzBjOWFjMWIyYzhhMTQpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzFlMWEyOGEwNjM3YzRlNzg4NmUwNjk3OTk5MDJkNDFkID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF9mMDRmYTFkMDJkMjM0M2E5YjI2YjI3OTVkMjFjYzUwNCA9ICQoYDxkaXYgaWQ9Imh0bWxfZjA0ZmExZDAyZDIzNDNhOWIyNmIyNzk1ZDIxY2M1MDQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlRoZSBTZWxmaWUgZmFjdG9yeTwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF8xZTFhMjhhMDYzN2M0ZTc4ODZlMDY5Nzk5OTAyZDQxZC5zZXRDb250ZW50KGh0bWxfZjA0ZmExZDAyZDIzNDNhOWIyNmIyNzk1ZDIxY2M1MDQpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfZTFiM2QzZTEyYjBhNDAxNTg0MDBmN2I3NjlkNTUyOGIuYmluZFBvcHVwKHBvcHVwXzFlMWEyOGEwNjM3YzRlNzg4NmUwNjk3OTk5MDJkNDFkKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyX2E0NGZlNDdkZDY2NTQ0MjJhNjQyNTVkNDNhMzgwYTgwID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNTEwMTM5NSwgLTAuMTM5Mjg4NzAwMDAwMDAwMDJdLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWE1OWE2NDQ5OTlmNDliOGIzNWNkNzljZGRlMjAxNzQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uXzY3NjAyODQzOTM4NDRjNjdhZjUxNjFmZjg3NDczZjZjID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJzaG9wcGluZy1jYXJ0IiwgImljb25Db2xvciI6ICJsaWdodGdyZWVuIiwgIm1hcmtlckNvbG9yIjogIm9yYW5nZSIsICJwcmVmaXgiOiAiZ2x5cGhpY29uIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyX2E0NGZlNDdkZDY2NTQ0MjJhNjQyNTVkNDNhMzgwYTgwLnNldEljb24oaWNvbl82NzYwMjg0MzkzODQ0YzY3YWY1MTYxZmY4NzQ3M2Y2Yyk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfZjY4MmU3MzQ2Yjg2NDM3YWJkNTM3NGQwMTVhYTBlYzggPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sX2VmZTMxYmJiZTU5ODRkM2ViMGNhYjNhOTUyNzMzMGQzID0gJChgPGRpdiBpZD0iaHRtbF9lZmUzMWJiYmU1OTg0ZDNlYjBjYWIzYTk1MjczMzBkMyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+c3VpdCBzdXBwbHk8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfZjY4MmU3MzQ2Yjg2NDM3YWJkNTM3NGQwMTVhYTBlYzguc2V0Q29udGVudChodG1sX2VmZTMxYmJiZTU5ODRkM2ViMGNhYjNhOTUyNzMzMGQzKTsKICAgICAgICAKCiAgICAgICAgbWFya2VyX2E0NGZlNDdkZDY2NTQ0MjJhNjQyNTVkNDNhMzgwYTgwLmJpbmRQb3B1cChwb3B1cF9mNjgyZTczNDZiODY0MzdhYmQ1Mzc0ZDAxNWFhMGVjOCkKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIG1hcmtlcl8xOGUzOGNhY2NhZGM0NmEzYjBiNDRhNDcyOWJhY2JkYiA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzUxLjUxMjgzMywgLTAuMTI3Njk1XSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgaWNvbl8xYmQ2YWFlOWEwYjE0NDE2YTU5YWQ3MjkyMzE5NzE0YSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbigKICAgICAgICAgICAgICAgIHsiZXh0cmFDbGFzc2VzIjogImZhLXJvdGF0ZS0wIiwgImljb24iOiAiaW5mby1zaWduIiwgImljb25Db2xvciI6ICJ3aGl0ZSIsICJtYXJrZXJDb2xvciI6ICJvcmFuZ2UiLCAicHJlZml4IjogImdseXBoaWNvbiJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl8xOGUzOGNhY2NhZGM0NmEzYjBiNDRhNDcyOWJhY2JkYi5zZXRJY29uKGljb25fMWJkNmFhZTlhMGIxNDQxNmE1OWFkNzI5MjMxOTcxNGEpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwX2Y0Yzg2NzdkODhjZTQzZTQ4YjczMDNjMDk5ZGY1ZWUzID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF81YjFjNmY0NjMwMmY0ZjZjYjA4NzQ3MjRlNzdmZjM4MiA9ICQoYDxkaXYgaWQ9Imh0bWxfNWIxYzZmNDYzMDJmNGY2Y2IwODc0NzI0ZTc3ZmYzODIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPnRoZSBtb3VzZXRyYXA8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfZjRjODY3N2Q4OGNlNDNlNDhiNzMwM2MwOTlkZjVlZTMuc2V0Q29udGVudChodG1sXzViMWM2ZjQ2MzAyZjRmNmNiMDg3NDcyNGU3N2ZmMzgyKTsKICAgICAgICAKCiAgICAgICAgbWFya2VyXzE4ZTM4Y2FjY2FkYzQ2YTNiMGI0NGE0NzI5YmFjYmRiLmJpbmRQb3B1cChwb3B1cF9mNGM4Njc3ZDg4Y2U0M2U0OGI3MzAzYzA5OWRmNWVlMykKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIG1hcmtlcl9mMzZjZTlhZGU3MmI0OTNhOTdkOWMyNzkxOTU0MjRlYSA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzUxLjUxMTk5ODk5OTk5OTk5NiwgLTAuMTIyNzY1MDAwMDAwMDAwMDFdLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWE1OWE2NDQ5OTlmNDliOGIzNWNkNzljZGRlMjAxNzQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uX2VmYzVmMWU0NGRmYzQ5MWQ4Y2EyNzIwZTBiODkyNGNjID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJpbmZvLXNpZ24iLCAiaWNvbkNvbG9yIjogIndoaXRlIiwgIm1hcmtlckNvbG9yIjogIm9yYW5nZSIsICJwcmVmaXgiOiAiZ2x5cGhpY29uIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyX2YzNmNlOWFkZTcyYjQ5M2E5N2Q5YzI3OTE5NTQyNGVhLnNldEljb24oaWNvbl9lZmM1ZjFlNDRkZmM0OTFkOGNhMjcyMGUwYjg5MjRjYyk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfZjNmYWUzNjZlM2JiNGQ3Njg3NGJkNjAyYTJhNzM5MWEgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzkzNjZiYTQ1MDY5YjQ5YTM4ZWUwY2QwMzEwNjVmZDk0ID0gJChgPGRpdiBpZD0iaHRtbF85MzY2YmE0NTA2OWI0OWEzOGVlMGNkMDMxMDY1ZmQ5NCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q292ZW50IEdhcmRlbiBNYXJrZXQ8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfZjNmYWUzNjZlM2JiNGQ3Njg3NGJkNjAyYTJhNzM5MWEuc2V0Q29udGVudChodG1sXzkzNjZiYTQ1MDY5YjQ5YTM4ZWUwY2QwMzEwNjVmZDk0KTsKICAgICAgICAKCiAgICAgICAgbWFya2VyX2YzNmNlOWFkZTcyYjQ5M2E5N2Q5YzI3OTE5NTQyNGVhLmJpbmRQb3B1cChwb3B1cF9mM2ZhZTM2NmUzYmI0ZDc2ODc0YmQ2MDJhMmE3MzkxYSkKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIG1hcmtlcl9kZDg2OTI1OTRiMmI0MWVjYjI0MTQ2NzhiMmJhNTk4NSA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzUxLjQ5OTI5MiwgLTAuMTI3MzA5OTk5OTk5OTk5OThdLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWE1OWE2NDQ5OTlmNDliOGIzNWNkNzljZGRlMjAxNzQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uXzk5ZDA4NjkzOGVkNjRiMjA5NjYyYzc1MGE5ZTE0ZTNkID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJpbmZvLXNpZ24iLCAiaWNvbkNvbG9yIjogIndoaXRlIiwgIm1hcmtlckNvbG9yIjogIm9yYW5nZSIsICJwcmVmaXgiOiAiZ2x5cGhpY29uIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyX2RkODY5MjU5NGIyYjQxZWNiMjQxNDY3OGIyYmE1OTg1LnNldEljb24oaWNvbl85OWQwODY5MzhlZDY0YjIwOTY2MmM3NTBhOWUxNGUzZCk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfZmQ3NzNkN2Q2OGM3NDNjYzlkOTc4ZjUxOTcyYzY2MWMgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sX2ZiZWExNjE0NWZiYzQ2NTdiNDAzMDYwYTdjNWExMzA4ID0gJChgPGRpdiBpZD0iaHRtbF9mYmVhMTYxNDVmYmM0NjU3YjQwMzA2MGE3YzVhMTMwOCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QWJiYXllIGRlIFdlc3RtaW5zdGVyPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwX2ZkNzczZDdkNjhjNzQzY2M5ZDk3OGY1MTk3MmM2NjFjLnNldENvbnRlbnQoaHRtbF9mYmVhMTYxNDVmYmM0NjU3YjQwMzA2MGE3YzVhMTMwOCk7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl9kZDg2OTI1OTRiMmI0MWVjYjI0MTQ2NzhiMmJhNTk4NS5iaW5kUG9wdXAocG9wdXBfZmQ3NzNkN2Q2OGM3NDNjYzlkOTc4ZjUxOTcyYzY2MWMpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfYWY4NjJmNTU1MGQ1NDljN2JkODQ4MGJlNWQ4NzQ3MzUgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFs1MS41MTEyLCAtMC4wODM1NDA5OTk5OTk5OTk5OV0sCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApLmFkZFRvKG1hcF9hYTU5YTY0NDk5OWY0OWI4YjM1Y2Q3OWNkZGUyMDE3NCk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGljb25fZjU4ZmRiMjBiNWVlNGU1MzhiZjJhYzRhNDBiY2FmODIgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oCiAgICAgICAgICAgICAgICB7ImV4dHJhQ2xhc3NlcyI6ICJmYS1yb3RhdGUtMCIsICJpY29uIjogImluZm8tc2lnbiIsICJpY29uQ29sb3IiOiAid2hpdGUiLCAibWFya2VyQ29sb3IiOiAibGlnaHRncmVlbiIsICJwcmVmaXgiOiAiZ2x5cGhpY29uIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyX2FmODYyZjU1NTBkNTQ5YzdiZDg0ODBiZTVkODc0NzM1LnNldEljb24oaWNvbl9mNThmZGIyMGI1ZWU0ZTUzOGJmMmFjNGE0MGJjYWY4Mik7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfNmFjNWY3OGU1YzA4NDdjNzg2NGFmYTdlNzk3NzU0MTQgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzQ5MTMwMDU5MGEzZjQ5YjU5ZjA5Yzk3YzViNzczZDgzID0gJChgPGRpdiBpZD0iaHRtbF80OTEzMDA1OTBhM2Y0OWI1OWYwOWM5N2M1Yjc3M2Q4MyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+U2t5IEdhcmRlbjwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF82YWM1Zjc4ZTVjMDg0N2M3ODY0YWZhN2U3OTc3NTQxNC5zZXRDb250ZW50KGh0bWxfNDkxMzAwNTkwYTNmNDliNTlmMDljOTdjNWI3NzNkODMpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfYWY4NjJmNTU1MGQ1NDljN2JkODQ4MGJlNWQ4NzQ3MzUuYmluZFBvcHVwKHBvcHVwXzZhYzVmNzhlNWMwODQ3Yzc4NjRhZmE3ZTc5Nzc1NDE0KQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyXzYzM2VlODZkYjQ0NDQzZDU5N2FiY2FiZGJhZTY1ZTg0ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNTUxNzA0LCAtMC4xNTg4MjZdLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWE1OWE2NDQ5OTlmNDliOGIzNWNkNzljZGRlMjAxNzQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uXzYwZGJiZjU4NTM0MTQwMWJiNTA2MDk1MWU1ZjI5MTkyID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJpbmZvLXNpZ24iLCAiaWNvbkNvbG9yIjogIndoaXRlIiwgIm1hcmtlckNvbG9yIjogIm9yYW5nZSIsICJwcmVmaXgiOiAiZ2x5cGhpY29uIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyXzYzM2VlODZkYjQ0NDQzZDU5N2FiY2FiZGJhZTY1ZTg0LnNldEljb24oaWNvbl82MGRiYmY1ODUzNDE0MDFiYjUwNjA5NTFlNWYyOTE5Mik7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfYzg0ODhhMTcxMDdmNDY1M2JkM2MzZWRmY2YxNTJjNjUgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzlmODllZDhkNDU4MDRkYjdhMmQ3NTRjNDA4MmQ2ZThjID0gJChgPGRpdiBpZD0iaHRtbF85Zjg5ZWQ4ZDQ1ODA0ZGI3YTJkNzU0YzQwODJkNmU4YyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2FtZGVuIE1hcmtldDwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9jODQ4OGExNzEwN2Y0NjUzYmQzYzNlZGZjZjE1MmM2NS5zZXRDb250ZW50KGh0bWxfOWY4OWVkOGQ0NTgwNGRiN2EyZDc1NGM0MDgyZDZlOGMpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfNjMzZWU4NmRiNDQ0NDNkNTk3YWJjYWJkYmFlNjVlODQuYmluZFBvcHVwKHBvcHVwX2M4NDg4YTE3MTA3ZjQ2NTNiZDNjM2VkZmNmMTUyYzY1KQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyXzQ1MjkzODc3MmYwMDQxODdiZTAyOGViMDUwMzBiZWY5ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNTA1NDQsIC0wLjA5MTA2MV0sCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApLmFkZFRvKG1hcF9hYTU5YTY0NDk5OWY0OWI4YjM1Y2Q3OWNkZGUyMDE3NCk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGljb25fYTNkZjY3ZTZkY2VjNGFmOWIzMzkwYTRlMDg4ZGU1M2YgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oCiAgICAgICAgICAgICAgICB7ImV4dHJhQ2xhc3NlcyI6ICJmYS1yb3RhdGUtMCIsICJpY29uIjogImluZm8tc2lnbiIsICJpY29uQ29sb3IiOiAid2hpdGUiLCAibWFya2VyQ29sb3IiOiAibGlnaHRncmVlbiIsICJwcmVmaXgiOiAiZ2x5cGhpY29uIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyXzQ1MjkzODc3MmYwMDQxODdiZTAyOGViMDUwMzBiZWY5LnNldEljb24oaWNvbl9hM2RmNjdlNmRjZWM0YWY5YjMzOTBhNGUwODhkZTUzZik7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfMzRkMzVhYWMzM2NjNGVhMzk5NWU5YzdkOTk4ZjI3OWQgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sX2EzMzBiMzc5ZjUxNjRmN2I4NjBlYjRhNzc0MTEyMzRlID0gJChgPGRpdiBpZD0iaHRtbF9hMzMwYjM3OWY1MTY0ZjdiODYwZWI0YTc3NDExMjM0ZSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Qm9yb3VnaCBNYXJrZXQ8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfMzRkMzVhYWMzM2NjNGVhMzk5NWU5YzdkOTk4ZjI3OWQuc2V0Q29udGVudChodG1sX2EzMzBiMzc5ZjUxNjRmN2I4NjBlYjRhNzc0MTEyMzRlKTsKICAgICAgICAKCiAgICAgICAgbWFya2VyXzQ1MjkzODc3MmYwMDQxODdiZTAyOGViMDUwMzBiZWY5LmJpbmRQb3B1cChwb3B1cF8zNGQzNWFhYzMzY2M0ZWEzOTk1ZTljN2Q5OThmMjc5ZCkKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIG1hcmtlcl8wNmY0MDgzODc2NWQ0MzRmYWY2YzJmOTk0ZmJkODBiZCA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzUxLjUwNTgzNywgLTAuMTg3NzI0XSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgaWNvbl8yNzJiOGFmZjllZDA0YTMyODg5YTFmNWVkMDM1NzQwZiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbigKICAgICAgICAgICAgICAgIHsiZXh0cmFDbGFzc2VzIjogImZhLXJvdGF0ZS0wIiwgImljb24iOiAiaW5mby1zaWduIiwgImljb25Db2xvciI6ICJ3aGl0ZSIsICJtYXJrZXJDb2xvciI6ICJsaW1lZ3JlZW4iLCAicHJlZml4IjogImdseXBoaWNvbiJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl8wNmY0MDgzODc2NWQ0MzRmYWY2YzJmOTk0ZmJkODBiZC5zZXRJY29uKGljb25fMjcyYjhhZmY5ZWQwNGEzMjg4OWExZjVlZDAzNTc0MGYpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzA0NDQ0Y2FhZjRmODQ1OWE4MGExN2RmMTNjY2ZhNWQzID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF82MmIwOGM1YjA5YWQ0ZDkwOGQ2NThjZDUyYjgzNDU4ZCA9ICQoYDxkaXYgaWQ9Imh0bWxfNjJiMDhjNWIwOWFkNGQ5MDhkNjU4Y2Q1MmI4MzQ1OGQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPnRoZSBPcmFuZ2VyeTwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF8wNDQ0NGNhYWY0Zjg0NTlhODBhMTdkZjEzY2NmYTVkMy5zZXRDb250ZW50KGh0bWxfNjJiMDhjNWIwOWFkNGQ5MDhkNjU4Y2Q1MmI4MzQ1OGQpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfMDZmNDA4Mzg3NjVkNDM0ZmFmNmMyZjk5NGZiZDgwYmQuYmluZFBvcHVwKHBvcHVwXzA0NDQ0Y2FhZjRmODQ1OWE4MGExN2RmMTNjY2ZhNWQzKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyXzBhYmVmY2FlMTI0YzQ3NTVhNDFlMjY4NTI2NTZhYTlhID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNTExNDk0LCAtMC4xMjAwOTgyXSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgaWNvbl9lNzJiZGVmNjlhODA0ZTdmOTQyNzY3ZjY5OGFiM2M2YiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbigKICAgICAgICAgICAgICAgIHsiZXh0cmFDbGFzc2VzIjogImZhLXJvdGF0ZS0wIiwgImljb24iOiAiaW5mby1zaWduIiwgImljb25Db2xvciI6ICJ3aGl0ZSIsICJtYXJrZXJDb2xvciI6ICJvcmFuZ2UiLCAicHJlZml4IjogImdseXBoaWNvbiJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl8wYWJlZmNhZTEyNGM0NzU1YTQxZTI2ODUyNjU2YWE5YS5zZXRJY29uKGljb25fZTcyYmRlZjY5YTgwNGU3Zjk0Mjc2N2Y2OThhYjNjNmIpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzBlMTAyZWQyNTE2MzRiNjk5YjgwNDZiNzgyMDdmODJjID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF8xNzk2M2UwY2NmOTg0MGRkYWQ0MmM0NDI1YzBlM2RjZCA9ICQoYDxkaXYgaWQ9Imh0bWxfMTc5NjNlMGNjZjk4NDBkZGFkNDJjNDQyNWMwZTNkY2QiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPktpbmcgTGlvbjwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF8wZTEwMmVkMjUxNjM0YjY5OWI4MDQ2Yjc4MjA3ZjgyYy5zZXRDb250ZW50KGh0bWxfMTc5NjNlMGNjZjk4NDBkZGFkNDJjNDQyNWMwZTNkY2QpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfMGFiZWZjYWUxMjRjNDc1NWE0MWUyNjg1MjY1NmFhOWEuYmluZFBvcHVwKHBvcHVwXzBlMTAyZWQyNTE2MzRiNjk5YjgwNDZiNzgyMDdmODJjKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyXzE2YjY2NGQ1ZGYwYTQwMzM4MDE5MGU0NTQ2M2U0NGNiID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNDcwNjUyLCAtMC4wNjgyODMwMDAwMDAwMDAwMV0sCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApLmFkZFRvKG1hcF9hYTU5YTY0NDk5OWY0OWI4YjM1Y2Q3OWNkZGUyMDE3NCk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGljb25fZmRjZWU3MGQ1ODdmNDEyN2EwMWMyNWRkOTdjMmU0MjMgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oCiAgICAgICAgICAgICAgICB7ImV4dHJhQ2xhc3NlcyI6ICJmYS1yb3RhdGUtMCIsICJpY29uIjogImluZm8tc2lnbiIsICJpY29uQ29sb3IiOiAid2hpdGUiLCAibWFya2VyQ29sb3IiOiAiYmVpZ2UiLCAicHJlZml4IjogImdseXBoaWNvbiJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl8xNmI2NjRkNWRmMGE0MDMzODAxOTBlNDU0NjNlNDRjYi5zZXRJY29uKGljb25fZmRjZWU3MGQ1ODdmNDEyN2EwMWMyNWRkOTdjMmU0MjMpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwX2ZlYjM4OGUxMTM0OTQ1MjY5MDE5OTAxMjc3NjRjZjE3ID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF83ODBlMDk5MWQ4NWQ0OWMyOGY4MWY2MDA5OTdiZTJlYSA9ICQoYDxkaXYgaWQ9Imh0bWxfNzgwZTA5OTFkODVkNDljMjhmODFmNjAwOTk3YmUyZWEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkZyYW5rcyBDYWZlPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwX2ZlYjM4OGUxMTM0OTQ1MjY5MDE5OTAxMjc3NjRjZjE3LnNldENvbnRlbnQoaHRtbF83ODBlMDk5MWQ4NWQ0OWMyOGY4MWY2MDA5OTdiZTJlYSk7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl8xNmI2NjRkNWRmMGE0MDMzODAxOTBlNDU0NjNlNDRjYi5iaW5kUG9wdXAocG9wdXBfZmViMzg4ZTExMzQ5NDUyNjkwMTk5MDEyNzc2NGNmMTcpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfMmQ2OTBhMDVlOTZhNGM1YjljYzNjZjZkNTI4ODhjMWMgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFs1MS40OTAwNTYsIC0wLjE5MTExOV0sCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApLmFkZFRvKG1hcF9hYTU5YTY0NDk5OWY0OWI4YjM1Y2Q3OWNkZGUyMDE3NCk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGljb25fNjE3YWVmYjVhMGVhNGE2YThkMDhmMzYzYmIwZmFjYzggPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oCiAgICAgICAgICAgICAgICB7ImV4dHJhQ2xhc3NlcyI6ICJmYS1yb3RhdGUtMCIsICJpY29uIjogImluZm8tc2lnbiIsICJpY29uQ29sb3IiOiAid2hpdGUiLCAibWFya2VyQ29sb3IiOiAibGltZWdyZWVuIiwgInByZWZpeCI6ICJnbHlwaGljb24ifQogICAgICAgICAgICApOwogICAgICAgICAgICBtYXJrZXJfMmQ2OTBhMDVlOTZhNGM1YjljYzNjZjZkNTI4ODhjMWMuc2V0SWNvbihpY29uXzYxN2FlZmI1YTBlYTRhNmE4ZDA4ZjM2M2JiMGZhY2M4KTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF83MzliMzk1NTU4MjI0MzllODJiMDNhYTBkYWM4NTkzYiA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfOWQyZDNkYWIxZDhlNDEzOWFkYTNhOGU1OTFiMDMzNjcgPSAkKGA8ZGl2IGlkPSJodG1sXzlkMmQzZGFiMWQ4ZTQxMzlhZGEzYThlNTkxYjAzMzY3IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5ldmFucyBhbmQgcGVlbCBkZXRlY3RpdmUgYWdlbmN5PC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzczOWIzOTU1NTgyMjQzOWU4MmIwM2FhMGRhYzg1OTNiLnNldENvbnRlbnQoaHRtbF85ZDJkM2RhYjFkOGU0MTM5YWRhM2E4ZTU5MWIwMzM2Nyk7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl8yZDY5MGEwNWU5NmE0YzViOWNjM2NmNmQ1Mjg4OGMxYy5iaW5kUG9wdXAocG9wdXBfNzM5YjM5NTU1ODIyNDM5ZTgyYjAzYWEwZGFjODU5M2IpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfMDZhMTJjYWQ0NWRlNDk1ZjgxN2NmY2EzYjAyODk1NmMgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFs1MS41MTI3NDYsIC0wLjE0MTU1Mjk5OTk5OTk5OTk4XSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgaWNvbl9lZmEzM2ZlY2MwZWE0MmYxODQzZmJiMDhkMTAyNjQxNyA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbigKICAgICAgICAgICAgICAgIHsiZXh0cmFDbGFzc2VzIjogImZhLXJvdGF0ZS0wIiwgImljb24iOiAiaW5mby1zaWduIiwgImljb25Db2xvciI6ICJ3aGl0ZSIsICJtYXJrZXJDb2xvciI6ICJvcmFuZ2UiLCAicHJlZml4IjogImdseXBoaWNvbiJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl8wNmExMmNhZDQ1ZGU0OTVmODE3Y2ZjYTNiMDI4OTU2Yy5zZXRJY29uKGljb25fZWZhMzNmZWNjMGVhNDJmMTg0M2ZiYjA4ZDEwMjY0MTcpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzJmMWJhMTgyN2UxYjRmMzdiMDIxZTQzOWQ4MWE5MmVkID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF81OTg4ZTNlMDU1ODM0OWFkODNlNzg3MzY1MTQxMTJiYyA9ICQoYDxkaXYgaWQ9Imh0bWxfNTk4OGUzZTA1NTgzNDlhZDgzZTc4NzM2NTE0MTEyYmMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPnNrZXRjaCBsb25kb248L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfMmYxYmExODI3ZTFiNGYzN2IwMjFlNDM5ZDgxYTkyZWQuc2V0Q29udGVudChodG1sXzU5ODhlM2UwNTU4MzQ5YWQ4M2U3ODczNjUxNDExMmJjKTsKICAgICAgICAKCiAgICAgICAgbWFya2VyXzA2YTEyY2FkNDVkZTQ5NWY4MTdjZmNhM2IwMjg5NTZjLmJpbmRQb3B1cChwb3B1cF8yZjFiYTE4MjdlMWI0ZjM3YjAyMWU0MzlkODFhOTJlZCkKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIG1hcmtlcl9jNTU0MzdiM2UzNzM0ODRmOTg1ZjkwNmFiNmI1YzQ2MyA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzUxLjUyODQ5MDAwMDAwMDAwNSwgLTAuMDg0NzI4XSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgaWNvbl8wZTYwODAxNWQzOTk0YTUxYjU1ZThkMjM1MmM1NWRjZSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbigKICAgICAgICAgICAgICAgIHsiZXh0cmFDbGFzc2VzIjogImZhLXJvdGF0ZS0wIiwgImljb24iOiAiaW5mby1zaWduIiwgImljb25Db2xvciI6ICJ3aGl0ZSIsICJtYXJrZXJDb2xvciI6ICJsaWdodGdyZWVuIiwgInByZWZpeCI6ICJnbHlwaGljb24ifQogICAgICAgICAgICApOwogICAgICAgICAgICBtYXJrZXJfYzU1NDM3YjNlMzczNDg0Zjk4NWY5MDZhYjZiNWM0NjMuc2V0SWNvbihpY29uXzBlNjA4MDE1ZDM5OTRhNTFiNTVlOGQyMzUyYzU1ZGNlKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF8zM2RjNjU5ZDM3ZGQ0YTEyYWRhZmQwZTIxODA0MTExZCA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfNjZlZjMzZTNjZmRhNGQxODhjZmExYzdlNDZmYzNkNDAgPSAkKGA8ZGl2IGlkPSJodG1sXzY2ZWYzM2UzY2ZkYTRkMTg4Y2ZhMWM3ZTQ2ZmMzZDQwIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5ncmFmZml0aSB3b3Jrc2hvcCBpbiBTaG9yZWRpdGNo4oCZcyBhcmVhPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzMzZGM2NTlkMzdkZDRhMTJhZGFmZDBlMjE4MDQxMTFkLnNldENvbnRlbnQoaHRtbF82NmVmMzNlM2NmZGE0ZDE4OGNmYTFjN2U0NmZjM2Q0MCk7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl9jNTU0MzdiM2UzNzM0ODRmOTg1ZjkwNmFiNmI1YzQ2My5iaW5kUG9wdXAocG9wdXBfMzNkYzY1OWQzN2RkNGExMmFkYWZkMGUyMTgwNDExMWQpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfMWIxYzUxODc0YWQzNDIwOGFhNGQ5MDQyMzYzNjMzM2MgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFs1MS41MDYwNDIxLCAtMC4wMTczNDI3MDAwMDAwMDAwMDNdLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWE1OWE2NDQ5OTlmNDliOGIzNWNkNzljZGRlMjAxNzQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uXzU4NmRlYTljZDgyZDQ1OGVhOWM4ZTJkYjBhYTBkMGZiID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJpbmZvLXNpZ24iLCAiaWNvbkNvbG9yIjogIndoaXRlIiwgIm1hcmtlckNvbG9yIjogImJlaWdlIiwgInByZWZpeCI6ICJnbHlwaGljb24ifQogICAgICAgICAgICApOwogICAgICAgICAgICBtYXJrZXJfMWIxYzUxODc0YWQzNDIwOGFhNGQ5MDQyMzYzNjMzM2Muc2V0SWNvbihpY29uXzU4NmRlYTljZDgyZDQ1OGVhOWM4ZTJkYjBhYTBkMGZiKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF9mOTgwYmZmNmVkZDc0ODJlODFiYjMxM2ZlNzlhZDYzMyA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfZmI4Y2MxZDU5OGUwNGVlZmE3NTA0MmRjMTE4YTliYzAgPSAkKGA8ZGl2IGlkPSJodG1sX2ZiOGNjMWQ1OThlMDRlZWZhNzUwNDJkYzExOGE5YmMwIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5HaWFudCBSb2JvdDwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9mOTgwYmZmNmVkZDc0ODJlODFiYjMxM2ZlNzlhZDYzMy5zZXRDb250ZW50KGh0bWxfZmI4Y2MxZDU5OGUwNGVlZmE3NTA0MmRjMTE4YTliYzApOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfMWIxYzUxODc0YWQzNDIwOGFhNGQ5MDQyMzYzNjMzM2MuYmluZFBvcHVwKHBvcHVwX2Y5ODBiZmY2ZWRkNzQ4MmU4MWJiMzEzZmU3OWFkNjMzKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyX2MzODM0MDVhNTI4YjQzMTBiOWE2NjhiOTJmODBmZmU3ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNTIzMzg1LCAtMC4wNzg4ODldLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWE1OWE2NDQ5OTlmNDliOGIzNWNkNzljZGRlMjAxNzQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uXzc5NjcwNTBjYzM0YzQ0MGE4YzA4OTdlYjkyOTJlMTM5ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJpbmZvLXNpZ24iLCAiaWNvbkNvbG9yIjogIndoaXRlIiwgIm1hcmtlckNvbG9yIjogImxpZ2h0Z3JlZW4iLCAicHJlZml4IjogImdseXBoaWNvbiJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl9jMzgzNDA1YTUyOGI0MzEwYjlhNjY4YjkyZjgwZmZlNy5zZXRJY29uKGljb25fNzk2NzA1MGNjMzRjNDQwYThjMDg5N2ViOTI5MmUxMzkpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzI3OTkxN2M2NjRhODRiMDk4NTg3ZWEyZGRhZGExZWEwID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF8xZjUyZmRhNjkxOGI0YjZjODU1NjdmNThiY2QyMTY2MiA9ICQoYDxkaXYgaWQ9Imh0bWxfMWY1MmZkYTY5MThiNGI2Yzg1NTY3ZjU4YmNkMjE2NjIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkRpbmVyYW1hPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzI3OTkxN2M2NjRhODRiMDk4NTg3ZWEyZGRhZGExZWEwLnNldENvbnRlbnQoaHRtbF8xZjUyZmRhNjkxOGI0YjZjODU1NjdmNThiY2QyMTY2Mik7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl9jMzgzNDA1YTUyOGI0MzEwYjlhNjY4YjkyZjgwZmZlNy5iaW5kUG9wdXAocG9wdXBfMjc5OTE3YzY2NGE4NGIwOTg1ODdlYTJkZGFkYTFlYTApCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfNWNiZDY5NjM2MTA3NGQ2MjllMTljMTdkMDg0NWRiNzAgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFs1MS40OTc2Mzk0LCAtMC4wNDM4ODUzXSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgaWNvbl9kZmQxNDQyN2ZmYjQ0MjYxYWM5ZDMwYjdjM2EzN2M3MCA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbigKICAgICAgICAgICAgICAgIHsiZXh0cmFDbGFzc2VzIjogImZhLXJvdGF0ZS0wIiwgImljb24iOiAiaW5mby1zaWduIiwgImljb25Db2xvciI6ICJ3aGl0ZSIsICJtYXJrZXJDb2xvciI6ICJiZWlnZSIsICJwcmVmaXgiOiAiZ2x5cGhpY29uIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyXzVjYmQ2OTYzNjEwNzRkNjI5ZTE5YzE3ZDA4NDVkYjcwLnNldEljb24oaWNvbl9kZmQxNDQyN2ZmYjQ0MjYxYWM5ZDMwYjdjM2EzN2M3MCk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfY2M4MjBkOGJkZjg0NDQ3ODkwNzExYWJmNDgzNjUzYjQgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzZmNzYwMmQzNWM2ZTQ0YWY5MzhjNGNhOWJkOWM3MGQ1ID0gJChgPGRpdiBpZD0iaHRtbF82Zjc2MDJkMzVjNmU0NGFmOTM4YzRjYTliZDljNzBkNSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SGF3a2VyIEhvdXNlPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwX2NjODIwZDhiZGY4NDQ0Nzg5MDcxMWFiZjQ4MzY1M2I0LnNldENvbnRlbnQoaHRtbF82Zjc2MDJkMzVjNmU0NGFmOTM4YzRjYTliZDljNzBkNSk7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl81Y2JkNjk2MzYxMDc0ZDYyOWUxOWMxN2QwODQ1ZGI3MC5iaW5kUG9wdXAocG9wdXBfY2M4MjBkOGJkZjg0NDQ3ODkwNzExYWJmNDgzNjUzYjQpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfZTUxNTZjMmQ5MjdhNDI4Nzg3NDRhYTMwYWUxZjNkOTkgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFs1MS41Mjg0MzYsIC0wLjA3MTQ0MTk5OTk5OTk5OTk5XSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwX2FhNTlhNjQ0OTk5ZjQ5YjhiMzVjZDc5Y2RkZTIwMTc0KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgaWNvbl82YTRhM2VkN2MyMDg0MDEzODk5ZjA5MjA1NzEyMmUxMiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbigKICAgICAgICAgICAgICAgIHsiZXh0cmFDbGFzc2VzIjogImZhLXJvdGF0ZS0wIiwgImljb24iOiAiaW5mby1zaWduIiwgImljb25Db2xvciI6ICJ3aGl0ZSIsICJtYXJrZXJDb2xvciI6ICJsaWdodGdyZWVuIiwgInByZWZpeCI6ICJnbHlwaGljb24ifQogICAgICAgICAgICApOwogICAgICAgICAgICBtYXJrZXJfZTUxNTZjMmQ5MjdhNDI4Nzg3NDRhYTMwYWUxZjNkOTkuc2V0SWNvbihpY29uXzZhNGEzZWQ3YzIwODQwMTM4OTlmMDkyMDU3MTIyZTEyKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF82MmU0OTA5Y2Y4NWU0NDY5YTE3MjIxMTNhZmJmZjY5ZSA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfMDhhMDFjN2RhMjllNGNkYTk4MDExMmQ3YjE5NjgyMmMgPSAkKGA8ZGl2IGlkPSJodG1sXzA4YTAxYzdkYTI5ZTRjZGE5ODAxMTJkN2IxOTY4MjJjIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Db2x1bWJpYSBSb2FkPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzYyZTQ5MDljZjg1ZTQ0NjlhMTcyMjExM2FmYmZmNjllLnNldENvbnRlbnQoaHRtbF8wOGEwMWM3ZGEyOWU0Y2RhOTgwMTEyZDdiMTk2ODIyYyk7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl9lNTE1NmMyZDkyN2E0Mjg3ODc0NGFhMzBhZTFmM2Q5OS5iaW5kUG9wdXAocG9wdXBfNjJlNDkwOWNmODVlNDQ2OWExNzIyMTEzYWZiZmY2OWUpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfMGQ1NDVhOTM0YjM1NDBjNWJjYzQwMWYzYzhhODY5Y2YgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFs1MS41MTE0ODgsIC0wLjEzMDMyMV0sCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApLmFkZFRvKG1hcF9hYTU5YTY0NDk5OWY0OWI4YjM1Y2Q3OWNkZGUyMDE3NCk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGljb25fNjUzMzYwYTVlNmMxNDdhZmJiNmFlZDhiYjliYWU0NmIgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oCiAgICAgICAgICAgICAgICB7ImV4dHJhQ2xhc3NlcyI6ICJmYS1yb3RhdGUtMCIsICJpY29uIjogImluZm8tc2lnbiIsICJpY29uQ29sb3IiOiAid2hpdGUiLCAibWFya2VyQ29sb3IiOiAib3JhbmdlIiwgInByZWZpeCI6ICJnbHlwaGljb24ifQogICAgICAgICAgICApOwogICAgICAgICAgICBtYXJrZXJfMGQ1NDVhOTM0YjM1NDBjNWJjYzQwMWYzYzhhODY5Y2Yuc2V0SWNvbihpY29uXzY1MzM2MGE1ZTZjMTQ3YWZiYjZhZWQ4YmI5YmFlNDZiKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF9mOTA5MWE0NjQ4NzE0NGI5YTllMzE2OWVhNDBlZDY1YiA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfYjEzYzAyM2ZjYmYzNGZiMTlmZGJiMzZjMGZiYWM4NTQgPSAkKGA8ZGl2IGlkPSJodG1sX2IxM2MwMjNmY2JmMzRmYjE5ZmRiYjM2YzBmYmFjODU0IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5QcmluY2UgQ2hhcmxlcyBjaW5lbWFcPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwX2Y5MDkxYTQ2NDg3MTQ0YjlhOWUzMTY5ZWE0MGVkNjViLnNldENvbnRlbnQoaHRtbF9iMTNjMDIzZmNiZjM0ZmIxOWZkYmIzNmMwZmJhYzg1NCk7CiAgICAgICAgCgogICAgICAgIG1hcmtlcl8wZDU0NWE5MzRiMzU0MGM1YmNjNDAxZjNjOGE4NjljZi5iaW5kUG9wdXAocG9wdXBfZjkwOTFhNDY0ODcxNDRiOWE5ZTMxNjllYTQwZWQ2NWIpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfNDA1NzI2YWNkZjZhNDg2MWI2ODFjODllMmRkYTg2MzcgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFs1MS41MTMxNDYsIC0wLjEyOTgwN10sCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApLmFkZFRvKG1hcF9hYTU5YTY0NDk5OWY0OWI4YjM1Y2Q3OWNkZGUyMDE3NCk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGljb25fNDA0NWMyNGY3ZjNkNGM1OTlhN2ZhYTA3ZDdlNTUzZDAgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oCiAgICAgICAgICAgICAgICB7ImV4dHJhQ2xhc3NlcyI6ICJmYS1yb3RhdGUtMCIsICJpY29uIjogImluZm8tc2lnbiIsICJpY29uQ29sb3IiOiAid2hpdGUiLCAibWFya2VyQ29sb3IiOiAib3JhbmdlIiwgInByZWZpeCI6ICJnbHlwaGljb24ifQogICAgICAgICAgICApOwogICAgICAgICAgICBtYXJrZXJfNDA1NzI2YWNkZjZhNDg2MWI2ODFjODllMmRkYTg2Mzcuc2V0SWNvbihpY29uXzQwNDVjMjRmN2YzZDRjNTk5YTdmYWEwN2Q3ZTU1M2QwKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF80NTFmZmY5OWI3Zjg0YjBmODc3MTcwOGMxZmVlMTUyZiA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfZmJmMTYxOWNmZGQ1NDlkMWFiYzZkODUzYzA4MGNiOWIgPSAkKGA8ZGl2IGlkPSJodG1sX2ZiZjE2MTljZmRkNTQ5ZDFhYmM2ZDg1M2MwODBjYjliIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5QYWxhY2UgVGhlYXRyZSBMb25kb24gLSBIYXJyeSBQb3R0ZXIgYW5kIHRoZSBDdXJzZWQgQ2hpbGQ8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfNDUxZmZmOTliN2Y4NGIwZjg3NzE3MDhjMWZlZTE1MmYuc2V0Q29udGVudChodG1sX2ZiZjE2MTljZmRkNTQ5ZDFhYmM2ZDg1M2MwODBjYjliKTsKICAgICAgICAKCiAgICAgICAgbWFya2VyXzQwNTcyNmFjZGY2YTQ4NjFiNjgxYzg5ZTJkZGE4NjM3LmJpbmRQb3B1cChwb3B1cF80NTFmZmY5OWI3Zjg0YjBmODc3MTcwOGMxZmVlMTUyZikKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIG1hcmtlcl85NTIyYmI1MmM1ODA0MzFmYWU3OWM2ZjEzOWJmNjMxZiA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzUxLjUwNDE5LCAtMC4wOTAwMjZdLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWE1OWE2NDQ5OTlmNDliOGIzNWNkNzljZGRlMjAxNzQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uX2UyYzlmYmMxNjBiNzQwNWRiMTVmMmRmZTZjYjE3M2EzID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJpbmZvLXNpZ24iLCAiaWNvbkNvbG9yIjogIndoaXRlIiwgIm1hcmtlckNvbG9yIjogImxpZ2h0Z3JlZW4iLCAicHJlZml4IjogImdseXBoaWNvbiJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl85NTIyYmI1MmM1ODA0MzFmYWU3OWM2ZjEzOWJmNjMxZi5zZXRJY29uKGljb25fZTJjOWZiYzE2MGI3NDA1ZGIxNWYyZGZlNmNiMTczYTMpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzg1ZTAwYTdjODA4OTQ2Mzk4NDUyNGRjODg1YjM2OTg0ID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF85ZGFhNDFlOWRmYjE0NTJlODcxZWU3YjBiMWM4Y2Y3YiA9ICQoYDxkaXYgaWQ9Imh0bWxfOWRhYTQxZTlkZmIxNDUyZTg3MWVlN2IwYjFjOGNmN2IiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkdlb3JnZSBJbm48L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfODVlMDBhN2M4MDg5NDYzOTg0NTI0ZGM4ODViMzY5ODQuc2V0Q29udGVudChodG1sXzlkYWE0MWU5ZGZiMTQ1MmU4NzFlZTdiMGIxYzhjZjdiKTsKICAgICAgICAKCiAgICAgICAgbWFya2VyXzk1MjJiYjUyYzU4MDQzMWZhZTc5YzZmMTM5YmY2MzFmLmJpbmRQb3B1cChwb3B1cF84NWUwMGE3YzgwODk0NjM5ODQ1MjRkYzg4NWIzNjk4NCkKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIG1hcmtlcl8yM2NjZTI5MzIyMDQ0YWQ2YTBlMmU3MmFlZGJjMWJmNyA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzUxLjUyNzI1MjgsIC0wLjA4ODc1NDVdLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWE1OWE2NDQ5OTlmNDliOGIzNWNkNzljZGRlMjAxNzQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uXzBiOGFhMTFmYzRhNDQzZjJhYTViMDI3ZTQxYTJiNDg0ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJpbmZvLXNpZ24iLCAiaWNvbkNvbG9yIjogIndoaXRlIiwgIm1hcmtlckNvbG9yIjogImxpZ2h0Z3JlZW4iLCAicHJlZml4IjogImdseXBoaWNvbiJ9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG1hcmtlcl8yM2NjZTI5MzIyMDQ0YWQ2YTBlMmU3MmFlZGJjMWJmNy5zZXRJY29uKGljb25fMGI4YWExMWZjNGE0NDNmMmFhNWIwMjdlNDFhMmI0ODQpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzQ2OTBlMTI3ZGNmZTQ2NTM5YTFlMTAyN2E4YTNmMzlhID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF8zZDdjYjQ5OWU2MTY0YzljOWJhZTQwOTliYjI2MzkxYyA9ICQoYDxkaXYgaWQ9Imh0bWxfM2Q3Y2I0OTllNjE2NGM5YzliYWU0MDk5YmIyNjM5MWMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlRoZSBTZWxmaWUgZmFjdG9yeTwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF80NjkwZTEyN2RjZmU0NjUzOWExZTEwMjdhOGEzZjM5YS5zZXRDb250ZW50KGh0bWxfM2Q3Y2I0OTllNjE2NGM5YzliYWU0MDk5YmIyNjM5MWMpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfMjNjY2UyOTMyMjA0NGFkNmEwZTJlNzJhZWRiYzFiZjcuYmluZFBvcHVwKHBvcHVwXzQ2OTBlMTI3ZGNmZTQ2NTM5YTFlMTAyN2E4YTNmMzlhKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFya2VyX2Y0M2RhNTgxMzM2NDQ3OTI4NjA4NTAzMDU0MmEyZTFhID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbNTEuNTEwMTM5NSwgLTAuMTM5Mjg4NzAwMDAwMDAwMDJdLAogICAgICAgICAgICAgICAge30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWE1OWE2NDQ5OTlmNDliOGIzNWNkNzljZGRlMjAxNzQpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBpY29uXzc1NzA5MTgwN2NlMzRhZGU4MzA0NmQ2NDMzYmQzNDlmID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKAogICAgICAgICAgICAgICAgeyJleHRyYUNsYXNzZXMiOiAiZmEtcm90YXRlLTAiLCAiaWNvbiI6ICJpbmZvLXNpZ24iLCAiaWNvbkNvbG9yIjogIndoaXRlIiwgIm1hcmtlckNvbG9yIjogIm9yYW5nZSIsICJwcmVmaXgiOiAiZ2x5cGhpY29uIn0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya2VyX2Y0M2RhNTgxMzM2NDQ3OTI4NjA4NTAzMDU0MmEyZTFhLnNldEljb24oaWNvbl83NTcwOTE4MDdjZTM0YWRlODMwNDZkNjQzM2JkMzQ5Zik7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfOWQ5MzhlODczYzkxNDg2ODkyZGI3NDc5MGQ2NTJiMTggPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzRhZTg4NWU0YTkxYzQ5NzM5YTJkMTU5YzZkYzAyZTQwID0gJChgPGRpdiBpZD0iaHRtbF80YWU4ODVlNGE5MWM0OTczOWEyZDE1OWM2ZGMwMmU0MCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+c3VpdCBzdXBwbHk8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfOWQ5MzhlODczYzkxNDg2ODkyZGI3NDc5MGQ2NTJiMTguc2V0Q29udGVudChodG1sXzRhZTg4NWU0YTkxYzQ5NzM5YTJkMTU5YzZkYzAyZTQwKTsKICAgICAgICAKCiAgICAgICAgbWFya2VyX2Y0M2RhNTgxMzM2NDQ3OTI4NjA4NTAzMDU0MmEyZTFhLmJpbmRQb3B1cChwb3B1cF85ZDkzOGU4NzNjOTE0ODY4OTJkYjc0NzkwZDY1MmIxOCkKICAgICAgICA7CgogICAgICAgIAogICAgCjwvc2NyaXB0Pg==" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>




```python
folium.PolyLine(locationlist, color="red", weight=2.5, opacity=1).add_to(map)
```




    <folium.vector_layers.PolyLine at 0x7f25d8015828>




```python
map
```


```python
! jupyter nbconvert --to html london.ipynb
```

    [NbConvertApp] Converting notebook london.ipynb to html
    [NbConvertApp] Writing 397538 bytes to london.html



```python

```
